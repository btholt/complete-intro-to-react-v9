{"pageProps":{"post":{"attributes":{"description":"Learn about creating custom hooks in React with Brian Holt's Complete Intro to React, covering how to build and integrate a custom hook for fetching pizza of the day using React hooks for effective separation and testability. Brian demonstrates building a component and using debug tools to inspect React custom hooks efficiently.","keywords":["custom hooks","React hooks","Brian Holt","pizza of the day","debug value"]},"html":"<h2>Custom Hooks</h2>\n<p>One thing that&#39;s pretty special about hooks is their composability. You can use hooks to make other hooks! People tend to call these custom hooks. There are even people who go as far to say &quot;never make an API request in a component, always do it in a hook.&quot; I don&#39;t know if I&#39;m as hardcore as that but I see the logic in it. If you make a custom hook for those sorts of things they become individually testable and do a good job to separate your display of data and your logic to acquire data. I&#39;m more in the camp of make custom hooks for either complicated logic or reusable logic, but for simple cases it&#39;s okay to keep things simple.</p>\n<p>Okay, so we want to add a &quot;Pizza of the Day&quot; banner at the bottom of our page. This necessitates calling a special API to get the pizza of the day (which should change every day based on your computer&#39;s time.) Let&#39;s first write the component that&#39;s going to use it.</p>\n<p>Make a file called PizzaOfTheDay.jsx</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { usePizzaOfTheDay } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./usePizzaOfTheDay&quot;</span>;\n\n<span class=\"hljs-comment\">// feel free to change en-US / USD to your locale</span>\n<span class=\"hljs-keyword\">const</span> intl = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Intl</span>.<span class=\"hljs-title class_\">NumberFormat</span>(<span class=\"hljs-string\">&quot;en-US&quot;</span>, {\n  <span class=\"hljs-attr\">style</span>: <span class=\"hljs-string\">&quot;currency&quot;</span>,\n  <span class=\"hljs-attr\">currency</span>: <span class=\"hljs-string\">&quot;USD&quot;</span>,\n});\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">PizzaOfTheDay</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> pizzaOfTheDay = <span class=\"hljs-title function_\">usePizzaOfTheDay</span>();\n\n  <span class=\"hljs-keyword\">if</span> (!pizzaOfTheDay) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>Loading...<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>;\n  }\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;pizza-of-the-day&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>Pizza of the Day<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;pizza-of-the-day-info&quot;</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h3</span>&gt;</span>{pizzaOfTheDay.name}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h3</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>{pizzaOfTheDay.description}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;pizza-of-the-day-price&quot;</span>&gt;</span>\n            From: <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span>&gt;</span>{intl.format(pizzaOfTheDay.sizes.S)}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>\n          <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">img</span>\n          <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">&quot;pizza-of-the-day-image&quot;</span>\n          <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">{pizzaOfTheDay.image}</span>\n          <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">{pizzaOfTheDay.name}</span>\n        /&gt;</span>\n      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">PizzaOfTheDay</span>;\n</code></pre><ul>\n<li>The cool part here is the <code>usePizzaOfTheDay()</code>. We now just get to rely on that this going to provide us with the pizza of the day from within the black box of the hook working.</li>\n</ul>\n<p>Okay, let&#39;s go make the hook! Make a file called usePizzaOfTheDay.jsx (you could call this .js instead of jsx but in a React project I just use JSX for all &quot;React-y&quot; things)</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { useState, useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">usePizzaOfTheDay</span> = (<span class=\"hljs-params\"></span>) =&gt; {\n  <span class=\"hljs-keyword\">const</span> [pizzaOfTheDay, setPizzaOfTheDay] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">null</span>);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">fetchPizzaOfTheDay</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&quot;/api/pizza-of-the-day&quot;</span>);\n      <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>();\n      <span class=\"hljs-title function_\">setPizzaOfTheDay</span>(data);\n    }\n\n    <span class=\"hljs-title function_\">fetchPizzaOfTheDay</span>();\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> pizzaOfTheDay;\n};\n</code></pre><ul>\n<li>This looks like what you&#39;d see at the top of a component, right? Now it&#39;s just encapsulated as a hook which makes it easy to test by itself! üéâ</li>\n<li>We can use <code>useState</code>, <code>useEffect</code>, or any hook we want here! We can even use other custom hooks!</li>\n</ul>\n<p>Lastly, let&#39;s go add this to App.jsx so our component renders.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// import at top</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">PizzaOfTheDay</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./PizzaOfTheDay&quot;</span>;\n\n<span class=\"hljs-comment\">// under &lt;Order /&gt;</span>\n<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">PizzaOfTheDay</span> /&gt;</span></span>\n</code></pre><p>You should now see the new component which uses our new hook at the bottom!</p>\n<p>Let&#39;s add one more fun debugging technique made especially for custom hooks. Put this in usePizzaOfTheDay.jsx:</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// import useDebugValue</span>\n<span class=\"hljs-keyword\">import</span> { useState, useEffect, useDebugValue } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react&quot;</span>;\n\n<span class=\"hljs-comment\">// add under the hook being used in the render function</span>\n<span class=\"hljs-title function_\">useDebugValue</span>(pizzaOfTheDay ? <span class=\"hljs-string\">`<span class=\"hljs-subst\">${pizzaOfTheDay.name}</span>`</span> : <span class=\"hljs-string\">&quot;Loading...&quot;</span>);\n</code></pre><p>Now open your React Dev Tools and inspect our PizzaOfTheDay component. You&#39;ll see our debug value there. This is helpful when you have <em>lots</em> of custom hooks and in particular lots of reused custom hooks that have differing values. It can help at a glance to discern which hook has which data inside of it.</p>\n<blockquote>\n<p>üèÅ <a href=\"https://github.com/btholt/citr-v9-project/tree/master/06-custom-hooks\">Click here to see the state of the project up until now: 06-custom-hooks</a></p>\n</blockquote>\n","markdown":"\n## Custom Hooks\n\nOne thing that's pretty special about hooks is their composability. You can use hooks to make other hooks! People tend to call these custom hooks. There are even people who go as far to say \"never make an API request in a component, always do it in a hook.\" I don't know if I'm as hardcore as that but I see the logic in it. If you make a custom hook for those sorts of things they become individually testable and do a good job to separate your display of data and your logic to acquire data. I'm more in the camp of make custom hooks for either complicated logic or reusable logic, but for simple cases it's okay to keep things simple.\n\nOkay, so we want to add a \"Pizza of the Day\" banner at the bottom of our page. This necessitates calling a special API to get the pizza of the day (which should change every day based on your computer's time.) Let's first write the component that's going to use it.\n\nMake a file called PizzaOfTheDay.jsx\n\n```javascript\nimport { usePizzaOfTheDay } from \"./usePizzaOfTheDay\";\n\n// feel free to change en-US / USD to your locale\nconst intl = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n});\n\nconst PizzaOfTheDay = () => {\n  const pizzaOfTheDay = usePizzaOfTheDay();\n\n  if (!pizzaOfTheDay) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"pizza-of-the-day\">\n      <h2>Pizza of the Day</h2>\n      <div>\n        <div className=\"pizza-of-the-day-info\">\n          <h3>{pizzaOfTheDay.name}</h3>\n          <p>{pizzaOfTheDay.description}</p>\n          <p className=\"pizza-of-the-day-price\">\n            From: <span>{intl.format(pizzaOfTheDay.sizes.S)}</span>\n          </p>\n        </div>\n        <img\n          className=\"pizza-of-the-day-image\"\n          src={pizzaOfTheDay.image}\n          alt={pizzaOfTheDay.name}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default PizzaOfTheDay;\n```\n\n- The cool part here is the `usePizzaOfTheDay()`. We now just get to rely on that this going to provide us with the pizza of the day from within the black box of the hook working.\n\nOkay, let's go make the hook! Make a file called usePizzaOfTheDay.jsx (you could call this .js instead of jsx but in a React project I just use JSX for all \"React-y\" things)\n\n```javascript\nimport { useState, useEffect } from \"react\";\n\nexport const usePizzaOfTheDay = () => {\n  const [pizzaOfTheDay, setPizzaOfTheDay] = useState(null);\n\n  useEffect(() => {\n    async function fetchPizzaOfTheDay() {\n      const response = await fetch(\"/api/pizza-of-the-day\");\n      const data = await response.json();\n      setPizzaOfTheDay(data);\n    }\n\n    fetchPizzaOfTheDay();\n  }, []);\n\n  return pizzaOfTheDay;\n};\n```\n\n- This looks like what you'd see at the top of a component, right? Now it's just encapsulated as a hook which makes it easy to test by itself! üéâ\n- We can use `useState`, `useEffect`, or any hook we want here! We can even use other custom hooks!\n\nLastly, let's go add this to App.jsx so our component renders.\n\n```javascript\n// import at top\nimport PizzaOfTheDay from \"./PizzaOfTheDay\";\n\n// under <Order />\n<PizzaOfTheDay />\n```\n\nYou should now see the new component which uses our new hook at the bottom!\n\nLet's add one more fun debugging technique made especially for custom hooks. Put this in usePizzaOfTheDay.jsx:\n\n```javascript\n// import useDebugValue\nimport { useState, useEffect, useDebugValue } from \"react\";\n\n// add under the hook being used in the render function\nuseDebugValue(pizzaOfTheDay ? `${pizzaOfTheDay.name}` : \"Loading...\");\n```\n\nNow open your React Dev Tools and inspect our PizzaOfTheDay component. You'll see our debug value there. This is helpful when you have _lots_ of custom hooks and in particular lots of reused custom hooks that have differing values. It can help at a glance to discern which hook has which data inside of it.\n\n> üèÅ [Click here to see the state of the project up until now: 06-custom-hooks][step]\n\n[step]: https://github.com/btholt/citr-v9-project/tree/master/06-custom-hooks\n","slug":"custom-hooks","title":"Custom Hooks","section":"Core React Concepts","icon":"book","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/04-core-react-concepts/E-custom-hooks.md","nextSlug":"/lessons/core-react-concepts/handling-user-inputs","prevSlug":"/lessons/core-react-concepts/dev-tools"}},"__N_SSG":true}