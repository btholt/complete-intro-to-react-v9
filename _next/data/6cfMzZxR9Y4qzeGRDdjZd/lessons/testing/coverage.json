{"pageProps":{"post":{"attributes":{"description":"Learn how to enhance your React test coverage with Vitest and v8 in the Complete Intro to React v9 course by Brian Holt. This guide explains setting up Chrome's built-in test coverage tool, v8, to visualize code coverage and improve your test effectiveness, with alternative support for Istanbul. Perfect for React developers aiming to optimize their testing strategies.","title":"v8","keywords":["React","Vitest","v8","test coverage","Brian Holt","Istanbul","frontend development"]},"html":"<p>One last very cool trick that Vitest has built into it: <a href=\"https://vitest.dev/guide/coverage.html\">v8</a>. v8 uses Chrome&#39;s builtin test coverage tool which tells you <em>how much</em> of your code that you&#39;re covering with tests. Via an interactive viewer you can see what lines are and aren&#39;t covered. This used to be annoying to set up by Vitest just does it for you.</p>\n<p>Run the following</p>\n<pre><code class=\"hljs language-bash\">npm i -D @vitest/coverage-v8@2.1.3\n</code></pre><blockquote>\n<p>You can also use <a href=\"https://istanbul.js.org/\">Istanbul</a> if you want to. <code>npm i -D @vitest/coverage-istanbul</code> will get you the package. But I&#39;d say v8 is the superior tool.</p>\n</blockquote>\n<p>Now add this to your <code>vite.config.js</code></p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// inside the test object</span>\n<span class=\"hljs-attr\">coverage</span>: {\n  <span class=\"hljs-attr\">reporter</span>: [<span class=\"hljs-string\">&quot;text&quot;</span>, <span class=\"hljs-string\">&quot;json&quot;</span>, <span class=\"hljs-string\">&quot;html&quot;</span>],\n},\n</code></pre><p>Add the following command to your npm scripts: <code>&quot;coverage&quot;: &quot;vitest --coverage&quot;</code> and go ahead run <code>npm run coverage</code> and open the following file in your browser: <code>open coverage/index.html</code>.</p>\n<p>Here you can see the files we&#39;ve written tests for. One file, <code>postContact</code> is missing two lines of coverage (click on the file name to see that): it&#39;s the line of reading back from the cache. It&#39;s a file we didn&#39;t write a test for but it got covered via our test for the contact page. It&#39;s missing a test to cover error cases which could be important. What if our contact API is down? This tool helps you look through your code and see what your tests aren&#39;t covering. Some of those could be fine and not worth the effort writing a test for. Others you&#39;ll look at and say &quot;oh my god we need to cover that with tests yesterday.&quot;</p>\n<p>Lastly, add <code>coverage/</code> to your <code>.gitignore</code> since this shouldn&#39;t be checked in.</p>\n<h2>Istanbul</h2>\n<p>v8 use Chrome&#39;s built-in code coverage capabilities to run your tests which makes it significantly faster and outputs it in a way that all of <a href=\"https://istanbul.js.org/\">Istanbul</a> tools work with it. You can tell Vitest to use Istanbul but unless you have a very specific reason to, just use v8.</p>\n","markdown":"\nOne last very cool trick that Vitest has built into it: [v8][v8]. v8 uses Chrome's builtin test coverage tool which tells you _how much_ of your code that you're covering with tests. Via an interactive viewer you can see what lines are and aren't covered. This used to be annoying to set up by Vitest just does it for you.\n\nRun the following\n\n```bash\nnpm i -D @vitest/coverage-v8@2.1.3\n```\n\n> You can also use [Istanbul][istanbul] if you want to. `npm i -D @vitest/coverage-istanbul` will get you the package. But I'd say v8 is the superior tool.\n\nNow add this to your `vite.config.js`\n\n```javascript\n// inside the test object\ncoverage: {\n  reporter: [\"text\", \"json\", \"html\"],\n},\n```\n\nAdd the following command to your npm scripts: `\"coverage\": \"vitest --coverage\"` and go ahead run `npm run coverage` and open the following file in your browser: `open coverage/index.html`.\n\nHere you can see the files we've written tests for. One file, `postContact` is missing two lines of coverage (click on the file name to see that): it's the line of reading back from the cache. It's a file we didn't write a test for but it got covered via our test for the contact page. It's missing a test to cover error cases which could be important. What if our contact API is down? This tool helps you look through your code and see what your tests aren't covering. Some of those could be fine and not worth the effort writing a test for. Others you'll look at and say \"oh my god we need to cover that with tests yesterday.\"\n\nLastly, add `coverage/` to your `.gitignore` since this shouldn't be checked in.\n\n## Istanbul\n\nv8 use Chrome's built-in code coverage capabilities to run your tests which makes it significantly faster and outputs it in a way that all of [Istanbul][istanbul] tools work with it. You can tell Vitest to use Istanbul but unless you have a very specific reason to, just use v8.\n\n[istanbul]: https://istanbul.js.org/\n[c8]: https://github.com/bcoe/c8\n[v8]: https://vitest.dev/guide/coverage.html\n","slug":"coverage","title":"v8","section":"Testing","icon":"vial","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/07-testing/F-coverage.md","nextSlug":"/lessons/testing/vitest-ui","prevSlug":"/lessons/testing/snapshot-testing"}},"__N_SSG":true}