<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>v8 – Complete Intro to React</title><meta name="description" content="Learn how to enhance your React test coverage with Vitest and v8 in the Complete Intro to React v9 course by Brian Holt. This guide explains setting up Chrome&#x27;s built-in test coverage tool, v8, to visualize code coverage and improve your test effectiveness, with alternative support for Istanbul. Perfect for React developers aiming to optimize their testing strategies."/><meta name="keywords" content="React,Vitest,v8,test coverage,Brian Holt,Istanbul,frontend development"/><meta name="og:description" content="Learn how to enhance your React test coverage with Vitest and v8 in the Complete Intro to React v9 course by Brian Holt. This guide explains setting up Chrome&#x27;s built-in test coverage tool, v8, to visualize code coverage and improve your test effectiveness, with alternative support for Istanbul. Perfect for React developers aiming to optimize their testing strategies."/><meta name="og:title" content="v8 – Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>One last very cool trick that Vitest has built into it: <a href="https://vitest.dev/guide/coverage.html">v8</a>. v8 uses Chrome&#39;s builtin test coverage tool which tells you <em>how much</em> of your code that you&#39;re covering with tests. Via an interactive viewer you can see what lines are and aren&#39;t covered. This used to be annoying to set up by Vitest just does it for you.</p>
<p>Run the following</p>
<pre><code class="hljs language-bash">npm i -D @vitest/coverage-v8@2.1.3
</code></pre><blockquote>
<p>You can also use <a href="https://istanbul.js.org/">Istanbul</a> if you want to. <code>npm i -D @vitest/coverage-istanbul</code> will get you the package. But I&#39;d say v8 is the superior tool.</p>
</blockquote>
<p>Now add this to your <code>vite.config.js</code></p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// inside the test object</span>
<span class="hljs-attr">coverage</span>: {
  <span class="hljs-attr">reporter</span>: [<span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;json&quot;</span>, <span class="hljs-string">&quot;html&quot;</span>],
},
</code></pre><p>Add the following command to your npm scripts: <code>&quot;coverage&quot;: &quot;vitest --coverage&quot;</code> and go ahead run <code>npm run coverage</code> and open the following file in your browser: <code>open coverage/index.html</code>.</p>
<p>Here you can see the files we&#39;ve written tests for. One file, <code>postContact</code> is missing two lines of coverage (click on the file name to see that): it&#39;s the line of reading back from the cache. It&#39;s a file we didn&#39;t write a test for but it got covered via our test for the contact page. It&#39;s missing a test to cover error cases which could be important. What if our contact API is down? This tool helps you look through your code and see what your tests aren&#39;t covering. Some of those could be fine and not worth the effort writing a test for. Others you&#39;ll look at and say &quot;oh my god we need to cover that with tests yesterday.&quot;</p>
<p>Lastly, add <code>coverage/</code> to your <code>.gitignore</code> since this shouldn&#39;t be checked in.</p>
<h2>Istanbul</h2>
<p>v8 use Chrome&#39;s built-in code coverage capabilities to run your tests which makes it significantly faster and outputs it in a way that all of <a href="https://istanbul.js.org/">Istanbul</a> tools work with it. You can tell Vitest to use Istanbul but unless you have a very specific reason to, just use v8.</p>
</div><div class="lesson-links"><a href="/lessons/testing/snapshot-testing" class="prev">← Previous</a><a href="/lessons/testing/vitest-ui" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Learn how to enhance your React test coverage with Vitest and v8 in the Complete Intro to React v9 course by Brian Holt. This guide explains setting up Chrome's built-in test coverage tool, v8, to visualize code coverage and improve your test effectiveness, with alternative support for Istanbul. Perfect for React developers aiming to optimize their testing strategies.","title":"v8","keywords":["React","Vitest","v8","test coverage","Brian Holt","Istanbul","frontend development"]},"html":"\u003cp\u003eOne last very cool trick that Vitest has built into it: \u003ca href=\"https://vitest.dev/guide/coverage.html\"\u003ev8\u003c/a\u003e. v8 uses Chrome\u0026#39;s builtin test coverage tool which tells you \u003cem\u003ehow much\u003c/em\u003e of your code that you\u0026#39;re covering with tests. Via an interactive viewer you can see what lines are and aren\u0026#39;t covered. This used to be annoying to set up by Vitest just does it for you.\u003c/p\u003e\n\u003cp\u003eRun the following\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm i -D @vitest/coverage-v8@2.1.3\n\u003c/code\u003e\u003c/pre\u003e\u003cblockquote\u003e\n\u003cp\u003eYou can also use \u003ca href=\"https://istanbul.js.org/\"\u003eIstanbul\u003c/a\u003e if you want to. \u003ccode\u003enpm i -D @vitest/coverage-istanbul\u003c/code\u003e will get you the package. But I\u0026#39;d say v8 is the superior tool.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eNow add this to your \u003ccode\u003evite.config.js\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// inside the test object\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ecoverage\u003c/span\u003e: {\n  \u003cspan class=\"hljs-attr\"\u003ereporter\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;json\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;html\u0026quot;\u003c/span\u003e],\n},\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAdd the following command to your npm scripts: \u003ccode\u003e\u0026quot;coverage\u0026quot;: \u0026quot;vitest --coverage\u0026quot;\u003c/code\u003e and go ahead run \u003ccode\u003enpm run coverage\u003c/code\u003e and open the following file in your browser: \u003ccode\u003eopen coverage/index.html\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHere you can see the files we\u0026#39;ve written tests for. One file, \u003ccode\u003epostContact\u003c/code\u003e is missing two lines of coverage (click on the file name to see that): it\u0026#39;s the line of reading back from the cache. It\u0026#39;s a file we didn\u0026#39;t write a test for but it got covered via our test for the contact page. It\u0026#39;s missing a test to cover error cases which could be important. What if our contact API is down? This tool helps you look through your code and see what your tests aren\u0026#39;t covering. Some of those could be fine and not worth the effort writing a test for. Others you\u0026#39;ll look at and say \u0026quot;oh my god we need to cover that with tests yesterday.\u0026quot;\u003c/p\u003e\n\u003cp\u003eLastly, add \u003ccode\u003ecoverage/\u003c/code\u003e to your \u003ccode\u003e.gitignore\u003c/code\u003e since this shouldn\u0026#39;t be checked in.\u003c/p\u003e\n\u003ch2\u003eIstanbul\u003c/h2\u003e\n\u003cp\u003ev8 use Chrome\u0026#39;s built-in code coverage capabilities to run your tests which makes it significantly faster and outputs it in a way that all of \u003ca href=\"https://istanbul.js.org/\"\u003eIstanbul\u003c/a\u003e tools work with it. You can tell Vitest to use Istanbul but unless you have a very specific reason to, just use v8.\u003c/p\u003e\n","markdown":"\nOne last very cool trick that Vitest has built into it: [v8][v8]. v8 uses Chrome's builtin test coverage tool which tells you _how much_ of your code that you're covering with tests. Via an interactive viewer you can see what lines are and aren't covered. This used to be annoying to set up by Vitest just does it for you.\n\nRun the following\n\n```bash\nnpm i -D @vitest/coverage-v8@2.1.3\n```\n\n\u003e You can also use [Istanbul][istanbul] if you want to. `npm i -D @vitest/coverage-istanbul` will get you the package. But I'd say v8 is the superior tool.\n\nNow add this to your `vite.config.js`\n\n```javascript\n// inside the test object\ncoverage: {\n  reporter: [\"text\", \"json\", \"html\"],\n},\n```\n\nAdd the following command to your npm scripts: `\"coverage\": \"vitest --coverage\"` and go ahead run `npm run coverage` and open the following file in your browser: `open coverage/index.html`.\n\nHere you can see the files we've written tests for. One file, `postContact` is missing two lines of coverage (click on the file name to see that): it's the line of reading back from the cache. It's a file we didn't write a test for but it got covered via our test for the contact page. It's missing a test to cover error cases which could be important. What if our contact API is down? This tool helps you look through your code and see what your tests aren't covering. Some of those could be fine and not worth the effort writing a test for. Others you'll look at and say \"oh my god we need to cover that with tests yesterday.\"\n\nLastly, add `coverage/` to your `.gitignore` since this shouldn't be checked in.\n\n## Istanbul\n\nv8 use Chrome's built-in code coverage capabilities to run your tests which makes it significantly faster and outputs it in a way that all of [Istanbul][istanbul] tools work with it. You can tell Vitest to use Istanbul but unless you have a very specific reason to, just use v8.\n\n[istanbul]: https://istanbul.js.org/\n[c8]: https://github.com/bcoe/c8\n[v8]: https://vitest.dev/guide/coverage.html\n","slug":"coverage","title":"v8","section":"Testing","icon":"vial","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/07-testing/F-coverage.md","nextSlug":"/lessons/testing/vitest-ui","prevSlug":"/lessons/testing/snapshot-testing"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"testing","slug":"coverage"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>