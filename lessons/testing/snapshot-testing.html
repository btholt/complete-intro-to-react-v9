<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Snapshot Testing – Complete Intro to React</title><meta name="description" content="Discover snapshot testing in React with Brian Holt&#x27;s Complete Intro to React, a course offering insights into efficient testing techniques for components like Cart.jsx. Learn about the benefits and limitations of snapshot tests, how to implement them using tools like Vitest, and explore their practical applications in UI and API development. Ideal for developers looking to enhance their testing strategies in web development."/><meta name="keywords" content="React,Snapshot Testing,Brian Holt,Vitest,UI Testing"/><meta name="og:description" content="Discover snapshot testing in React with Brian Holt&#x27;s Complete Intro to React, a course offering insights into efficient testing techniques for components like Cart.jsx. Learn about the benefits and limitations of snapshot tests, how to implement them using tools like Vitest, and explore their practical applications in UI and API development. Ideal for developers looking to enhance their testing strategies in web development."/><meta name="og:title" content="Snapshot Testing – Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>I&#39;m not a fan of seeking 100% test coverage. I think it&#39;s a fool&#39;s errand and a waste of time. I&#39;d rather you write five tests that cover the most important five lines of your code than see you write one test for five less-important pieces of UI code.</p>
<p>But let&#39;s show you an easy way to cheat and get there! Let&#39;s talk about snapshot testing.</p>
<p>Snapshot tests are low confidence, low cost ways of writing tests. With more-or-less a single line of code you can assert: this code doesn&#39;t break, and it isn&#39;t changing over time.</p>
<p>Let&#39;s test Cart.jsx. It&#39;s a pretty stable component that doesn&#39;t do a lot and we don&#39;t expect it to change a lot if at all. A low cost, low confidence test could fit here. Make a file called Cart.test.jsx</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { expect, test } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vitest&quot;</span>;
<span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@testing-library/react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Cart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../Cart&quot;</span>;

<span class="hljs-title function_">test</span>(<span class="hljs-string">&quot;snapshot with nothing in cart&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> { asFragment } = <span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Cart</span> <span class="hljs-attr">cart</span>=<span class="hljs-string">{[]}</span> /&gt;</span></span>);
  <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">asFragment</span>()).<span class="hljs-title function_">toMatchSnapshot</span>();
});
</code></pre><p>Run this to see Vitest say it created a snapshot. Go look now at Cart.test.jsx.snap in the <code>src/__tests__/__snapshots__</code> to see what it created. You can see it&#39;s just rendering out what it would look like. Now if you modify Cart.jsx it will fail the test. As you can see, it&#39;s a quick gut check to make sure your changes don&#39;t have cascading problems. If I modify App.jsx and it causes this to fail it means I can catch it and validate quickly. Some people don&#39;t find it useful. I&#39;m not entirely sold on it to be honest; at most these should be used very sparingly. This could be useful if you have a component that you expect to <em>never</em> change and it would be a problem if it did. Maybe a footer? I don&#39;t know. I never write these.</p>
<p>Let&#39;s add some pizzas and see how it does.</p>
<pre><code class="hljs language-javascript"><span class="hljs-title function_">test</span>(<span class="hljs-string">&quot;snapshot with some stuff in cart&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> { asFragment } = <span class="hljs-title function_">render</span>(
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Cart</span>
      <span class="hljs-attr">cart</span>=<span class="hljs-string">{[</span>
        {
          <span class="hljs-attr">pizza:</span> {
            <span class="hljs-attr">id:</span> &quot;<span class="hljs-attr">pepperoni</span>&quot;,
            <span class="hljs-attr">name:</span> &quot;<span class="hljs-attr">The</span> <span class="hljs-attr">Pepperoni</span> <span class="hljs-attr">Pizza</span>&quot;,
            <span class="hljs-attr">category:</span> &quot;<span class="hljs-attr">Classic</span>&quot;,
            <span class="hljs-attr">description:</span> &quot;<span class="hljs-attr">Mozzarella</span> <span class="hljs-attr">Cheese</span>, <span class="hljs-attr">Pepperoni</span>&quot;,
            <span class="hljs-attr">image:</span> &quot;/<span class="hljs-attr">public</span>/<span class="hljs-attr">pizzas</span>/<span class="hljs-attr">pepperoni.webp</span>&quot;,
            <span class="hljs-attr">sizes:</span> {
              <span class="hljs-attr">S:</span> <span class="hljs-attr">9.75</span>,
              <span class="hljs-attr">M:</span> <span class="hljs-attr">12.5</span>,
              <span class="hljs-attr">L:</span> <span class="hljs-attr">15.25</span>,
            },
          },
          <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">M</span>&quot;,
          <span class="hljs-attr">price:</span> &quot;$<span class="hljs-attr">12.50</span>&quot;,
        },
        {
          <span class="hljs-attr">pizza:</span> {
            <span class="hljs-attr">id:</span> &quot;<span class="hljs-attr">ckn_pesto</span>&quot;,
            <span class="hljs-attr">name:</span> &quot;<span class="hljs-attr">The</span> <span class="hljs-attr">Chicken</span> <span class="hljs-attr">Pesto</span> <span class="hljs-attr">Pizza</span>&quot;,
            <span class="hljs-attr">category:</span> &quot;<span class="hljs-attr">Chicken</span>&quot;,
            <span class="hljs-attr">description:</span>
              &quot;<span class="hljs-attr">Chicken</span>, <span class="hljs-attr">Tomatoes</span>, <span class="hljs-attr">Red</span> <span class="hljs-attr">Peppers</span>, <span class="hljs-attr">Spinach</span>, <span class="hljs-attr">Garlic</span>, <span class="hljs-attr">Pesto</span> <span class="hljs-attr">Sauce</span>&quot;,
            <span class="hljs-attr">image:</span> &quot;/<span class="hljs-attr">public</span>/<span class="hljs-attr">pizzas</span>/<span class="hljs-attr">ckn_pesto.webp</span>&quot;,
            <span class="hljs-attr">sizes:</span> {
              <span class="hljs-attr">S:</span> <span class="hljs-attr">12.75</span>,
              <span class="hljs-attr">M:</span> <span class="hljs-attr">16.75</span>,
              <span class="hljs-attr">L:</span> <span class="hljs-attr">20.75</span>,
            },
          },
          <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">L</span>&quot;,
          <span class="hljs-attr">price:</span> &quot;$<span class="hljs-attr">20.75</span>&quot;,
        },
        {
          <span class="hljs-attr">pizza:</span> {
            <span class="hljs-attr">id:</span> &quot;<span class="hljs-attr">bbq_ckn</span>&quot;,
            <span class="hljs-attr">name:</span> &quot;<span class="hljs-attr">The</span> <span class="hljs-attr">Barbecue</span> <span class="hljs-attr">Chicken</span> <span class="hljs-attr">Pizza</span>&quot;,
            <span class="hljs-attr">category:</span> &quot;<span class="hljs-attr">Chicken</span>&quot;,
            <span class="hljs-attr">description:</span>
              &quot;<span class="hljs-attr">Barbecued</span> <span class="hljs-attr">Chicken</span>, <span class="hljs-attr">Red</span> <span class="hljs-attr">Peppers</span>, <span class="hljs-attr">Green</span> <span class="hljs-attr">Peppers</span>, <span class="hljs-attr">Tomatoes</span>, <span class="hljs-attr">Red</span> <span class="hljs-attr">Onions</span>, <span class="hljs-attr">Barbecue</span> <span class="hljs-attr">Sauce</span>&quot;,
            <span class="hljs-attr">image:</span> &quot;/<span class="hljs-attr">public</span>/<span class="hljs-attr">pizzas</span>/<span class="hljs-attr">bbq_ckn.webp</span>&quot;,
            <span class="hljs-attr">sizes:</span> {
              <span class="hljs-attr">S:</span> <span class="hljs-attr">12.75</span>,
              <span class="hljs-attr">M:</span> <span class="hljs-attr">16.75</span>,
              <span class="hljs-attr">L:</span> <span class="hljs-attr">20.75</span>,
            },
          },
          <span class="hljs-attr">size:</span> &quot;<span class="hljs-attr">S</span>&quot;,
          <span class="hljs-attr">price:</span> &quot;$<span class="hljs-attr">12.75</span>&quot;,
        },
      ]}
    /&gt;</span></span>
  );
  <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">asFragment</span>()).<span class="hljs-title function_">toMatchSnapshot</span>();
});
</code></pre><p>This works, and now you can stick with this, but here&#39;s a problem. If you look at your snapshot, it&#39;s rendering Pizza components as well. Now if you modify Pizza.jsx (that has its own tests already) your <em>Cart.jsx</em> test is going to fail. This is misleading, nothing is wrong or different with Cart.jsx. In a previous version of this class I show you how to accomplish this with react-test-renderer. However the folks at @testing-lib think shallow rendering is more harmful than helpful (I like, 75% agree) so we&#39;ll leave it out. <a href="https://frontendmasters.com/courses/intermediate-react-v4/snapshots/">Click here</a> to see me teach this previously. It&#39;s 95% the same, just uses Jest instead of Vitest.</p>
<p>Update your snapshots by either running <code>npm run test -- -u</code> or you can use the watcher to do it with either <code>u</code> to update all at once or do <code>i</code> one-by-one.</p>
<p>You should commit snapshot files to git.</p>
<p>I&#39;ll leave it up to you how much you value these tests. I think they have a very limited place in UI testing but it&#39;s pretty low level of help. Frequently they become more noise than help. In any case, keep them in your toolbox, some times they can be helpful.</p>
<blockquote>
<p>As a side note, one place I saw some use for snapshot tests (as they can track any object shape over time, not just React components) was in the backend in API response shapes. We&#39;d write a snapshot test that this API response is always going to look like this and it should fail the test if it breaks. This makes it very intentional every time you modify the API response (since your API clients are likely relying on it being a certain shape.) Furthermore, it means the frontend devs can use these snapshot files to see what the API response is going to look like. Niche, but it was helpful on the one project I worked on that had it.</p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/testing/testing-custom-hooks" class="prev">← Previous</a><a href="/lessons/testing/coverage" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Discover snapshot testing in React with Brian Holt's Complete Intro to React, a course offering insights into efficient testing techniques for components like Cart.jsx. Learn about the benefits and limitations of snapshot tests, how to implement them using tools like Vitest, and explore their practical applications in UI and API development. Ideal for developers looking to enhance their testing strategies in web development.","keywords":["React","Snapshot Testing","Brian Holt","Vitest","UI Testing"]},"html":"\u003cp\u003eI\u0026#39;m not a fan of seeking 100% test coverage. I think it\u0026#39;s a fool\u0026#39;s errand and a waste of time. I\u0026#39;d rather you write five tests that cover the most important five lines of your code than see you write one test for five less-important pieces of UI code.\u003c/p\u003e\n\u003cp\u003eBut let\u0026#39;s show you an easy way to cheat and get there! Let\u0026#39;s talk about snapshot testing.\u003c/p\u003e\n\u003cp\u003eSnapshot tests are low confidence, low cost ways of writing tests. With more-or-less a single line of code you can assert: this code doesn\u0026#39;t break, and it isn\u0026#39;t changing over time.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s test Cart.jsx. It\u0026#39;s a pretty stable component that doesn\u0026#39;t do a lot and we don\u0026#39;t expect it to change a lot if at all. A low cost, low confidence test could fit here. Make a file called Cart.test.jsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { expect, test } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;vitest\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { render } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@testing-library/react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCart\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../Cart\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;snapshot with nothing in cart\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { asFragment } = \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eCart\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ecart\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[]}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e);\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003easFragment\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003etoMatchSnapshot\u003c/span\u003e();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRun this to see Vitest say it created a snapshot. Go look now at Cart.test.jsx.snap in the \u003ccode\u003esrc/__tests__/__snapshots__\u003c/code\u003e to see what it created. You can see it\u0026#39;s just rendering out what it would look like. Now if you modify Cart.jsx it will fail the test. As you can see, it\u0026#39;s a quick gut check to make sure your changes don\u0026#39;t have cascading problems. If I modify App.jsx and it causes this to fail it means I can catch it and validate quickly. Some people don\u0026#39;t find it useful. I\u0026#39;m not entirely sold on it to be honest; at most these should be used very sparingly. This could be useful if you have a component that you expect to \u003cem\u003enever\u003c/em\u003e change and it would be a problem if it did. Maybe a footer? I don\u0026#39;t know. I never write these.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s add some pizzas and see how it does.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;snapshot with some stuff in cart\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { asFragment } = \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eCart\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ecart\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[\u003c/span\u003e\n        {\n          \u003cspan class=\"hljs-attr\"\u003epizza:\u003c/span\u003e {\n            \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003epepperoni\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eThe\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePepperoni\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePizza\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ecategory:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eClassic\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003edescription:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eMozzarella\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eCheese\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ePepperoni\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u0026quot;/\u003cspan class=\"hljs-attr\"\u003epublic\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003epizzas\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003epepperoni.webp\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003esizes:\u003c/span\u003e {\n              \u003cspan class=\"hljs-attr\"\u003eS:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e9.75\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eM:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e12.5\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eL:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e15.25\u003c/span\u003e,\n            },\n          },\n          \u003cspan class=\"hljs-attr\"\u003esize:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eM\u003c/span\u003e\u0026quot;,\n          \u003cspan class=\"hljs-attr\"\u003eprice:\u003c/span\u003e \u0026quot;$\u003cspan class=\"hljs-attr\"\u003e12.50\u003c/span\u003e\u0026quot;,\n        },\n        {\n          \u003cspan class=\"hljs-attr\"\u003epizza:\u003c/span\u003e {\n            \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eckn_pesto\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eThe\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePesto\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePizza\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ecategory:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003edescription:\u003c/span\u003e\n              \u0026quot;\u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eTomatoes\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eRed\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePeppers\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eSpinach\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eGarlic\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ePesto\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eSauce\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u0026quot;/\u003cspan class=\"hljs-attr\"\u003epublic\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003epizzas\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003eckn_pesto.webp\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003esizes:\u003c/span\u003e {\n              \u003cspan class=\"hljs-attr\"\u003eS:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e12.75\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eM:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e16.75\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eL:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e20.75\u003c/span\u003e,\n            },\n          },\n          \u003cspan class=\"hljs-attr\"\u003esize:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eL\u003c/span\u003e\u0026quot;,\n          \u003cspan class=\"hljs-attr\"\u003eprice:\u003c/span\u003e \u0026quot;$\u003cspan class=\"hljs-attr\"\u003e20.75\u003c/span\u003e\u0026quot;,\n        },\n        {\n          \u003cspan class=\"hljs-attr\"\u003epizza:\u003c/span\u003e {\n            \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003ebbq_ckn\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eThe\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eBarbecue\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePizza\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003ecategory:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003edescription:\u003c/span\u003e\n              \u0026quot;\u003cspan class=\"hljs-attr\"\u003eBarbecued\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eChicken\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eRed\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePeppers\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eGreen\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePeppers\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eTomatoes\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eRed\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eOnions\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eBarbecue\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eSauce\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u0026quot;/\u003cspan class=\"hljs-attr\"\u003epublic\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003epizzas\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003ebbq_ckn.webp\u003c/span\u003e\u0026quot;,\n            \u003cspan class=\"hljs-attr\"\u003esizes:\u003c/span\u003e {\n              \u003cspan class=\"hljs-attr\"\u003eS:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e12.75\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eM:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e16.75\u003c/span\u003e,\n              \u003cspan class=\"hljs-attr\"\u003eL:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e20.75\u003c/span\u003e,\n            },\n          },\n          \u003cspan class=\"hljs-attr\"\u003esize:\u003c/span\u003e \u0026quot;\u003cspan class=\"hljs-attr\"\u003eS\u003c/span\u003e\u0026quot;,\n          \u003cspan class=\"hljs-attr\"\u003eprice:\u003c/span\u003e \u0026quot;$\u003cspan class=\"hljs-attr\"\u003e12.75\u003c/span\u003e\u0026quot;,\n        },\n      ]}\n    /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n  \u003cspan class=\"hljs-title function_\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003easFragment\u003c/span\u003e()).\u003cspan class=\"hljs-title function_\"\u003etoMatchSnapshot\u003c/span\u003e();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis works, and now you can stick with this, but here\u0026#39;s a problem. If you look at your snapshot, it\u0026#39;s rendering Pizza components as well. Now if you modify Pizza.jsx (that has its own tests already) your \u003cem\u003eCart.jsx\u003c/em\u003e test is going to fail. This is misleading, nothing is wrong or different with Cart.jsx. In a previous version of this class I show you how to accomplish this with react-test-renderer. However the folks at @testing-lib think shallow rendering is more harmful than helpful (I like, 75% agree) so we\u0026#39;ll leave it out. \u003ca href=\"https://frontendmasters.com/courses/intermediate-react-v4/snapshots/\"\u003eClick here\u003c/a\u003e to see me teach this previously. It\u0026#39;s 95% the same, just uses Jest instead of Vitest.\u003c/p\u003e\n\u003cp\u003eUpdate your snapshots by either running \u003ccode\u003enpm run test -- -u\u003c/code\u003e or you can use the watcher to do it with either \u003ccode\u003eu\u003c/code\u003e to update all at once or do \u003ccode\u003ei\u003c/code\u003e one-by-one.\u003c/p\u003e\n\u003cp\u003eYou should commit snapshot files to git.\u003c/p\u003e\n\u003cp\u003eI\u0026#39;ll leave it up to you how much you value these tests. I think they have a very limited place in UI testing but it\u0026#39;s pretty low level of help. Frequently they become more noise than help. In any case, keep them in your toolbox, some times they can be helpful.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs a side note, one place I saw some use for snapshot tests (as they can track any object shape over time, not just React components) was in the backend in API response shapes. We\u0026#39;d write a snapshot test that this API response is always going to look like this and it should fail the test if it breaks. This makes it very intentional every time you modify the API response (since your API clients are likely relying on it being a certain shape.) Furthermore, it means the frontend devs can use these snapshot files to see what the API response is going to look like. Niche, but it was helpful on the one project I worked on that had it.\u003c/p\u003e\n\u003c/blockquote\u003e\n","markdown":"\nI'm not a fan of seeking 100% test coverage. I think it's a fool's errand and a waste of time. I'd rather you write five tests that cover the most important five lines of your code than see you write one test for five less-important pieces of UI code.\n\nBut let's show you an easy way to cheat and get there! Let's talk about snapshot testing.\n\nSnapshot tests are low confidence, low cost ways of writing tests. With more-or-less a single line of code you can assert: this code doesn't break, and it isn't changing over time.\n\nLet's test Cart.jsx. It's a pretty stable component that doesn't do a lot and we don't expect it to change a lot if at all. A low cost, low confidence test could fit here. Make a file called Cart.test.jsx\n\n```javascript\nimport { expect, test } from \"vitest\";\nimport { render } from \"@testing-library/react\";\nimport Cart from \"../Cart\";\n\ntest(\"snapshot with nothing in cart\", () =\u003e {\n  const { asFragment } = render(\u003cCart cart={[]} /\u003e);\n  expect(asFragment()).toMatchSnapshot();\n});\n```\n\nRun this to see Vitest say it created a snapshot. Go look now at Cart.test.jsx.snap in the `src/__tests__/__snapshots__` to see what it created. You can see it's just rendering out what it would look like. Now if you modify Cart.jsx it will fail the test. As you can see, it's a quick gut check to make sure your changes don't have cascading problems. If I modify App.jsx and it causes this to fail it means I can catch it and validate quickly. Some people don't find it useful. I'm not entirely sold on it to be honest; at most these should be used very sparingly. This could be useful if you have a component that you expect to _never_ change and it would be a problem if it did. Maybe a footer? I don't know. I never write these.\n\nLet's add some pizzas and see how it does.\n\n```javascript\ntest(\"snapshot with some stuff in cart\", () =\u003e {\n  const { asFragment } = render(\n    \u003cCart\n      cart={[\n        {\n          pizza: {\n            id: \"pepperoni\",\n            name: \"The Pepperoni Pizza\",\n            category: \"Classic\",\n            description: \"Mozzarella Cheese, Pepperoni\",\n            image: \"/public/pizzas/pepperoni.webp\",\n            sizes: {\n              S: 9.75,\n              M: 12.5,\n              L: 15.25,\n            },\n          },\n          size: \"M\",\n          price: \"$12.50\",\n        },\n        {\n          pizza: {\n            id: \"ckn_pesto\",\n            name: \"The Chicken Pesto Pizza\",\n            category: \"Chicken\",\n            description:\n              \"Chicken, Tomatoes, Red Peppers, Spinach, Garlic, Pesto Sauce\",\n            image: \"/public/pizzas/ckn_pesto.webp\",\n            sizes: {\n              S: 12.75,\n              M: 16.75,\n              L: 20.75,\n            },\n          },\n          size: \"L\",\n          price: \"$20.75\",\n        },\n        {\n          pizza: {\n            id: \"bbq_ckn\",\n            name: \"The Barbecue Chicken Pizza\",\n            category: \"Chicken\",\n            description:\n              \"Barbecued Chicken, Red Peppers, Green Peppers, Tomatoes, Red Onions, Barbecue Sauce\",\n            image: \"/public/pizzas/bbq_ckn.webp\",\n            sizes: {\n              S: 12.75,\n              M: 16.75,\n              L: 20.75,\n            },\n          },\n          size: \"S\",\n          price: \"$12.75\",\n        },\n      ]}\n    /\u003e\n  );\n  expect(asFragment()).toMatchSnapshot();\n});\n```\n\nThis works, and now you can stick with this, but here's a problem. If you look at your snapshot, it's rendering Pizza components as well. Now if you modify Pizza.jsx (that has its own tests already) your _Cart.jsx_ test is going to fail. This is misleading, nothing is wrong or different with Cart.jsx. In a previous version of this class I show you how to accomplish this with react-test-renderer. However the folks at @testing-lib think shallow rendering is more harmful than helpful (I like, 75% agree) so we'll leave it out. [Click here][fem] to see me teach this previously. It's 95% the same, just uses Jest instead of Vitest.\n\nUpdate your snapshots by either running `npm run test -- -u` or you can use the watcher to do it with either `u` to update all at once or do `i` one-by-one.\n\nYou should commit snapshot files to git.\n\nI'll leave it up to you how much you value these tests. I think they have a very limited place in UI testing but it's pretty low level of help. Frequently they become more noise than help. In any case, keep them in your toolbox, some times they can be helpful.\n\n\u003e As a side note, one place I saw some use for snapshot tests (as they can track any object shape over time, not just React components) was in the backend in API response shapes. We'd write a snapshot test that this API response is always going to look like this and it should fail the test if it breaks. This makes it very intentional every time you modify the API response (since your API clients are likely relying on it being a certain shape.) Furthermore, it means the frontend devs can use these snapshot files to see what the API response is going to look like. Niche, but it was helpful on the one project I worked on that had it.\n\n[fem]: https://frontendmasters.com/courses/intermediate-react-v4/snapshots/\n","slug":"snapshot-testing","title":"Snapshot Testing","section":"Testing","icon":"vial","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/07-testing/E-snapshot-testing.md","nextSlug":"/lessons/testing/coverage","prevSlug":"/lessons/testing/testing-custom-hooks"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"testing","slug":"snapshot-testing"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>