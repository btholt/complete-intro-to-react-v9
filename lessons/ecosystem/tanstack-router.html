<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>TanStack Router ‚Äì Complete Intro to React</title><meta name="description" content="Discover how to implement routing in React using TanStack Router with insights from Brian Holt&#x27;s Complete Intro to React v9. Learn about client-side focused routing solutions, file-based route generation, and lazy loading techniques to optimize your React applications."/><meta name="keywords" content="React,TanStack Router,routing,client-side,Brian Holt"/><meta name="og:description" content="Discover how to implement routing in React using TanStack Router with insights from Brian Holt&#x27;s Complete Intro to React v9. Learn about client-side focused routing solutions, file-based route generation, and lazy loading techniques to optimize your React applications."/><meta name="og:title" content="TanStack Router ‚Äì Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Tanstack Router</h2>
<p>So now we have arrived to the point where we want multiple pages in our app. We need some sort of router tool to accomplish that. We <em>could</em> just work with the browser&#39;s history API to do it but there so many ways to get it wrong, plus we are spoiled for choice when it comes to great React routing libraries.</p>
<p>Historically I have taught <a href="https://reactrouter.com/">react-router</a> as part of this course. It has been around for a long time and is well tested. Nearly every version of this course uses it (there was a brief while where it was Reach Router, but that has since been merged back into React Router.) It is a great tool and it underpins Remix, a great full-stack React framework. Remix and React Router are actually merging and will eventually be the same thing. <a href="https://react-v8.holt.courses/lessons/react-capabilities/react-router">v8 of this course</a> use React Router if you want to learn more about it from me.</p>
<h2>TanStack Router</h2>
<p>Today we are going to be using <a href="https://tanstack.com/router/latest">TanStack Router</a>, another amazing router. Why the switch? Two reasons:</p>
<ul>
<li>This is a client-side focused course, and TanStack Router is made for client-side use cases. React Router and Remix have shifted a lot of focus to a more full-stack experience (though they do still work client-side only).</li>
<li>In Intermediate React we will be covering more full-stack use cases, in which I will using Next.js to show off those features.</li>
</ul>
<p>So, suffice to say, you have a lot of good choices. I&#39;m a fan of TanStack Router and I think it&#39;s a great tool for you to get started with. Let&#39;s dive in.</p>
<p>Let&#39;s start by installing it.</p>
<pre><code class="hljs language-bash">npm install @tanstack/react-router@1.65.0
npm install -D @tanstack/router-plugin@1.65.0 @tanstack/router-devtools@1.65.0
</code></pre><p>We need to install the router and then we&#39;ll be using its code generation tool as well as its dev tools (which are dev-only, hence the -D). Let&#39;s add it first to our vite.config.js.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TanStackRouterVite</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/router-plugin/vite&quot;</span>;

<span class="hljs-comment">// add before react() in plugins</span>
<span class="hljs-attr">plugins</span>: [<span class="hljs-title class_">TanStackRouterVite</span>(), <span class="hljs-title function_">react</span>()],
</code></pre><p>TanStack Router works by file-based conventions. You create routes in a specific way and TanStack Router will automatically glue it together for you. It does this by creating a file called <code>routeTree.gen.ts</code>. Even though this isn&#39;t a TypeScript project, the fact that this is TypeScript means that VS Code can read the types from your routes and help you with suggestions and intelligent errors. I would suggest adding this file to your <code>.gitignore</code> as well since it will get autogenerated with every build. Okay, so let&#39;s go make the files we need.</p>
<p>Create a <code>routes</code> directory in your <code>src</code> directory. Let&#39;s make a <code>__root.jsx</code> file in there. This file will be the base template used for every route. Most of this will come from App.jsx</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> { createRootRoute, <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TanStackRouterDevtools</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/router-devtools&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PizzaOfTheDay</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../PizzaOfTheDay&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../Header&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CartContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../contexts&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Route</span> = <span class="hljs-title function_">createRootRoute</span>({
  <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> cartHook = <span class="hljs-title function_">useState</span>([]);
    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">CartContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{cartHook}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">PizzaOfTheDay</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">CartContext.Provider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TanStackRouterDevtools</span> /&gt;</span>
      <span class="hljs-tag">&lt;/&gt;</span></span>
    );
  },
});
</code></pre><ul>
<li>We added an <code>&lt;Outlet/&gt;</code> instead of our Order component. Now we can swap in new routes there! Notice that the Header will always be there as will the PizzaOfTheDay.</li>
<li>We added TanStack&#39;s excellent dev tools. We&#39;ll take a look at them in a bit, but they&#39;re in the bottom left, you can click on them once your app loads.</li>
<li><code>&lt;&gt;</code> and <code>&lt;/&gt;</code> are for when you want to render two sibling components (our context and our dev tools) but don&#39;t want to add a random div there. React requires you only return one top level component and we can do that with <code>&lt;&gt;</code> and <code>&lt;/&gt;</code></li>
</ul>
<p>Great, let&#39;s go modify App.jsx now</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// add at top</span>
<span class="hljs-comment">// remove useState import from react import</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouterProvider</span>, createRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;
<span class="hljs-keyword">import</span> { routeTree } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./routeTree.gen&quot;</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({ routeTree });

<span class="hljs-comment">// replace App</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StrictMode</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">StrictMode</span>&gt;</span></span>
  );
};
</code></pre><p>This just imports the generated routeTree and then makes use of it in the project. This file really only should be used for rendering the file. Everything else should likely live in __root.jsx.</p>
<p>Okay, move Order.jsx from the base directory and into <code>routes</code>. If it asks, say yes to update paths. Rename it to <code>order.lazy.jsx</code> Let&#39;s modify it now to make it a route.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> { createLazyFileRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;

<span class="hljs-comment">// make sure you modified the relative paths here ‚Äì VS Code may have done this for you already</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CartContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../contexts&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Cart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../Cart&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Pizza</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../Pizza&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Route</span> = <span class="hljs-title function_">createLazyFileRoute</span>(<span class="hljs-string">&quot;/order&quot;</span>)({
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Order</span>,
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Order</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// Order component code ‚Ä¶</span>
}
</code></pre><ul>
<li>Here we&#39;re making a new route. We define what URL it&#39;s at, <code>/order</code>, and what component to render, <code>Order</code>.</li>
<li>We&#39;re making it lazy. It will now code split this for us and lazy-load our route for us. This really helps in large apps. In this tiny app it probably actually slows us down because adding 1KB to an app doesn&#39;t slow it down, but an extra round trip does. When you do lazy loading, please measure if it&#39;s helping. In any case, this is how you do it.</li>
</ul>
<p>That&#39;s it! This used to be so hard to code split. In some of my old classes we had to go through some serious work to get it work but now this is all it takes! Pretty cool.</p>
<p>Let&#39;s add a home page! Make a file called <code>index.lazy.jsx</code> in the routes folder.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { createLazyFileRoute, <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Route</span> = <span class="hljs-title function_">createLazyFileRoute</span>(<span class="hljs-string">&quot;/&quot;</span>)({
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Index</span>,
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;index-brand&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Padre Gino&#x27;s<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Pizza &amp; Art at a location near you<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/order&quot;</span>&gt;</span>Order<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/past&quot;</span>&gt;</span>Past Orders<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre><ul>
<li>Nothing new here except maybe the links. These link components make it easy for TanStack Router to control the browser history so definitely use them.</li>
</ul>
<p>Lastly let&#39;s modify Header to be able to link back to the home page.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// at the top</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;

<span class="hljs-comment">// surround the logo with a link</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{</span>&quot;/&quot;}&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span>Padre Gino&#x27;s Pizza<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
</code></pre><p>This should all work now. Open your app and see if it loads.</p>
<ul>
<li>Notice you get a little flash before it loads. It&#39;s lazy-loading your route. If this was a real app, we&#39;d make a more pleasant loading experience. I&#39;ll leave that as an exercise for you to do.</li>
<li>So, let&#39;s talk about the cart. Go to the order page, add a bunch of stuff to cart, and head back to the home page. Notice there&#39;s still stuff in our cart! Head back to the order page and see it&#39;s still there. That&#39;s because __root.jsx (where our cart state lives) never gets un-rendered. If this just lived in Cart.jsx or order.lazy.jsx, it&#39;d be blown away whenever you navigate away. Why? Because when the component gets un-rendered, it loses all of its state. This is one of the reasons Context can be super powerful.</li>
<li>Take a gander at the dev tools being rendered in the bottom left (don&#39;t worry, it gets stripped out automatically in production.) Click into and peruse around. Lots of cool stuff here for free.</li>
</ul>
<p>You did it! That&#39;s how easy routing has become. It&#39;s come so far from the early days of React.</p>
<blockquote>
<p>üèÅ <a href="https://github.com/btholt/citr-v9-project/tree/master/09-routing">Click here to see the state of the project up until now: 09-routing</a></p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/core-react-concepts/context" class="prev">‚Üê Previous</a><a href="/lessons/ecosystem/tanstack-query" class="next">Next ‚Üí</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"TanStack Router","description":"Discover how to implement routing in React using TanStack Router with insights from Brian Holt's Complete Intro to React v9. Learn about client-side focused routing solutions, file-based route generation, and lazy loading techniques to optimize your React applications.","keywords":["React","TanStack Router","routing","client-side","Brian Holt"]},"html":"\u003ch2\u003eTanstack Router\u003c/h2\u003e\n\u003cp\u003eSo now we have arrived to the point where we want multiple pages in our app. We need some sort of router tool to accomplish that. We \u003cem\u003ecould\u003c/em\u003e just work with the browser\u0026#39;s history API to do it but there so many ways to get it wrong, plus we are spoiled for choice when it comes to great React routing libraries.\u003c/p\u003e\n\u003cp\u003eHistorically I have taught \u003ca href=\"https://reactrouter.com/\"\u003ereact-router\u003c/a\u003e as part of this course. It has been around for a long time and is well tested. Nearly every version of this course uses it (there was a brief while where it was Reach Router, but that has since been merged back into React Router.) It is a great tool and it underpins Remix, a great full-stack React framework. Remix and React Router are actually merging and will eventually be the same thing. \u003ca href=\"https://react-v8.holt.courses/lessons/react-capabilities/react-router\"\u003ev8 of this course\u003c/a\u003e use React Router if you want to learn more about it from me.\u003c/p\u003e\n\u003ch2\u003eTanStack Router\u003c/h2\u003e\n\u003cp\u003eToday we are going to be using \u003ca href=\"https://tanstack.com/router/latest\"\u003eTanStack Router\u003c/a\u003e, another amazing router. Why the switch? Two reasons:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eThis is a client-side focused course, and TanStack Router is made for client-side use cases. React Router and Remix have shifted a lot of focus to a more full-stack experience (though they do still work client-side only).\u003c/li\u003e\n\u003cli\u003eIn Intermediate React we will be covering more full-stack use cases, in which I will using Next.js to show off those features.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo, suffice to say, you have a lot of good choices. I\u0026#39;m a fan of TanStack Router and I think it\u0026#39;s a great tool for you to get started with. Let\u0026#39;s dive in.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s start by installing it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm install @tanstack/react-router@1.65.0\nnpm install -D @tanstack/router-plugin@1.65.0 @tanstack/router-devtools@1.65.0\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe need to install the router and then we\u0026#39;ll be using its code generation tool as well as its dev tools (which are dev-only, hence the -D). Let\u0026#39;s add it first to our vite.config.js.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eTanStackRouterVite\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/router-plugin/vite\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// add before react() in plugins\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eplugins\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eTanStackRouterVite\u003c/span\u003e(), \u003cspan class=\"hljs-title function_\"\u003ereact\u003c/span\u003e()],\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTanStack Router works by file-based conventions. You create routes in a specific way and TanStack Router will automatically glue it together for you. It does this by creating a file called \u003ccode\u003erouteTree.gen.ts\u003c/code\u003e. Even though this isn\u0026#39;t a TypeScript project, the fact that this is TypeScript means that VS Code can read the types from your routes and help you with suggestions and intelligent errors. I would suggest adding this file to your \u003ccode\u003e.gitignore\u003c/code\u003e as well since it will get autogenerated with every build. Okay, so let\u0026#39;s go make the files we need.\u003c/p\u003e\n\u003cp\u003eCreate a \u003ccode\u003eroutes\u003c/code\u003e directory in your \u003ccode\u003esrc\u003c/code\u003e directory. Let\u0026#39;s make a \u003ccode\u003e__root.jsx\u003c/code\u003e file in there. This file will be the base template used for every route. Most of this will come from App.jsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createRootRoute, \u003cspan class=\"hljs-title class_\"\u003eOutlet\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eTanStackRouterDevtools\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/router-devtools\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePizzaOfTheDay\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../PizzaOfTheDay\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHeader\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../Header\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCartContext\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../contexts\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateRootRoute\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003ecomponent\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cartHook = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e([]);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eCartContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{cartHook}\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eHeader\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eOutlet\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ePizzaOfTheDay\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eCartContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eTanStackRouterDevtools\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    );\n  },\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eWe added an \u003ccode\u003e\u0026lt;Outlet/\u0026gt;\u003c/code\u003e instead of our Order component. Now we can swap in new routes there! Notice that the Header will always be there as will the PizzaOfTheDay.\u003c/li\u003e\n\u003cli\u003eWe added TanStack\u0026#39;s excellent dev tools. We\u0026#39;ll take a look at them in a bit, but they\u0026#39;re in the bottom left, you can click on them once your app loads.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026lt;\u0026gt;\u003c/code\u003e and \u003ccode\u003e\u0026lt;/\u0026gt;\u003c/code\u003e are for when you want to render two sibling components (our context and our dev tools) but don\u0026#39;t want to add a random div there. React requires you only return one top level component and we can do that with \u003ccode\u003e\u0026lt;\u0026gt;\u003c/code\u003e and \u003ccode\u003e\u0026lt;/\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eGreat, let\u0026#39;s go modify App.jsx now\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// add at top\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// remove useState import from react import\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouterProvider\u003c/span\u003e, createRouter } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { routeTree } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./routeTree.gen\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e router = \u003cspan class=\"hljs-title function_\"\u003ecreateRouter\u003c/span\u003e({ routeTree });\n\n\u003cspan class=\"hljs-comment\"\u003e// replace App\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eStrictMode\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eRouterProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erouter\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{router}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eStrictMode\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis just imports the generated routeTree and then makes use of it in the project. This file really only should be used for rendering the file. Everything else should likely live in __root.jsx.\u003c/p\u003e\n\u003cp\u003eOkay, move Order.jsx from the base directory and into \u003ccode\u003eroutes\u003c/code\u003e. If it asks, say yes to update paths. Rename it to \u003ccode\u003eorder.lazy.jsx\u003c/code\u003e Let\u0026#39;s modify it now to make it a route.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createLazyFileRoute } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// make sure you modified the relative paths here ‚Äì VS Code may have done this for you already\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCartContext\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../contexts\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCart\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../Cart\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePizza\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../Pizza\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateLazyFileRoute\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/order\u0026quot;\u003c/span\u003e)({\n  \u003cspan class=\"hljs-attr\"\u003ecomponent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eOrder\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eOrder\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment\"\u003e// Order component code ‚Ä¶\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eHere we\u0026#39;re making a new route. We define what URL it\u0026#39;s at, \u003ccode\u003e/order\u003c/code\u003e, and what component to render, \u003ccode\u003eOrder\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eWe\u0026#39;re making it lazy. It will now code split this for us and lazy-load our route for us. This really helps in large apps. In this tiny app it probably actually slows us down because adding 1KB to an app doesn\u0026#39;t slow it down, but an extra round trip does. When you do lazy loading, please measure if it\u0026#39;s helping. In any case, this is how you do it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThat\u0026#39;s it! This used to be so hard to code split. In some of my old classes we had to go through some serious work to get it work but now this is all it takes! Pretty cool.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s add a home page! Make a file called \u003ccode\u003eindex.lazy.jsx\u003c/code\u003e in the routes folder.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createLazyFileRoute, \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateLazyFileRoute\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e)({\n  \u003cspan class=\"hljs-attr\"\u003ecomponent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eIndex\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eIndex\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;index\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;index-brand\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003ePadre Gino\u0026#x27;s\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003ePizza \u0026amp; Art at a location near you\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;/order\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eOrder\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;/past\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003ePast Orders\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eli\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eul\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eNothing new here except maybe the links. These link components make it easy for TanStack Router to control the browser history so definitely use them.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLastly let\u0026#39;s modify Header to be able to link back to the home page.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// at the top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// surround the logo with a link\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026quot;/\u0026quot;}\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;logo\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003ePadre Gino\u0026#x27;s Pizza\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis should all work now. Open your app and see if it loads.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNotice you get a little flash before it loads. It\u0026#39;s lazy-loading your route. If this was a real app, we\u0026#39;d make a more pleasant loading experience. I\u0026#39;ll leave that as an exercise for you to do.\u003c/li\u003e\n\u003cli\u003eSo, let\u0026#39;s talk about the cart. Go to the order page, add a bunch of stuff to cart, and head back to the home page. Notice there\u0026#39;s still stuff in our cart! Head back to the order page and see it\u0026#39;s still there. That\u0026#39;s because __root.jsx (where our cart state lives) never gets un-rendered. If this just lived in Cart.jsx or order.lazy.jsx, it\u0026#39;d be blown away whenever you navigate away. Why? Because when the component gets un-rendered, it loses all of its state. This is one of the reasons Context can be super powerful.\u003c/li\u003e\n\u003cli\u003eTake a gander at the dev tools being rendered in the bottom left (don\u0026#39;t worry, it gets stripped out automatically in production.) Click into and peruse around. Lots of cool stuff here for free.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou did it! That\u0026#39;s how easy routing has become. It\u0026#39;s come so far from the early days of React.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüèÅ \u003ca href=\"https://github.com/btholt/citr-v9-project/tree/master/09-routing\"\u003eClick here to see the state of the project up until now: 09-routing\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","markdown":"\n## Tanstack Router\n\nSo now we have arrived to the point where we want multiple pages in our app. We need some sort of router tool to accomplish that. We _could_ just work with the browser's history API to do it but there so many ways to get it wrong, plus we are spoiled for choice when it comes to great React routing libraries.\n\nHistorically I have taught [react-router][rr] as part of this course. It has been around for a long time and is well tested. Nearly every version of this course uses it (there was a brief while where it was Reach Router, but that has since been merged back into React Router.) It is a great tool and it underpins Remix, a great full-stack React framework. Remix and React Router are actually merging and will eventually be the same thing. [v8 of this course][v8] use React Router if you want to learn more about it from me.\n\n## TanStack Router\n\nToday we are going to be using [TanStack Router][tsr], another amazing router. Why the switch? Two reasons:\n\n- This is a client-side focused course, and TanStack Router is made for client-side use cases. React Router and Remix have shifted a lot of focus to a more full-stack experience (though they do still work client-side only).\n- In Intermediate React we will be covering more full-stack use cases, in which I will using Next.js to show off those features.\n\nSo, suffice to say, you have a lot of good choices. I'm a fan of TanStack Router and I think it's a great tool for you to get started with. Let's dive in.\n\nLet's start by installing it.\n\n```bash\nnpm install @tanstack/react-router@1.65.0\nnpm install -D @tanstack/router-plugin@1.65.0 @tanstack/router-devtools@1.65.0\n```\n\nWe need to install the router and then we'll be using its code generation tool as well as its dev tools (which are dev-only, hence the -D). Let's add it first to our vite.config.js.\n\n```javascript\n// at top\nimport { TanStackRouterVite } from \"@tanstack/router-plugin/vite\";\n\n// add before react() in plugins\nplugins: [TanStackRouterVite(), react()],\n```\n\nTanStack Router works by file-based conventions. You create routes in a specific way and TanStack Router will automatically glue it together for you. It does this by creating a file called `routeTree.gen.ts`. Even though this isn't a TypeScript project, the fact that this is TypeScript means that VS Code can read the types from your routes and help you with suggestions and intelligent errors. I would suggest adding this file to your `.gitignore` as well since it will get autogenerated with every build. Okay, so let's go make the files we need.\n\nCreate a `routes` directory in your `src` directory. Let's make a `__root.jsx` file in there. This file will be the base template used for every route. Most of this will come from App.jsx\n\n```javascript\nimport { useState } from \"react\";\nimport { createRootRoute, Outlet } from \"@tanstack/react-router\";\nimport { TanStackRouterDevtools } from \"@tanstack/router-devtools\";\nimport PizzaOfTheDay from \"../PizzaOfTheDay\";\nimport Header from \"../Header\";\nimport { CartContext } from \"../contexts\";\n\nexport const Route = createRootRoute({\n  component: () =\u003e {\n    const cartHook = useState([]);\n    return (\n      \u003c\u003e\n        \u003cCartContext.Provider value={cartHook}\u003e\n          \u003cdiv\u003e\n            \u003cHeader /\u003e\n            \u003cOutlet /\u003e\n            \u003cPizzaOfTheDay /\u003e\n          \u003c/div\u003e\n        \u003c/CartContext.Provider\u003e\n        \u003cTanStackRouterDevtools /\u003e\n      \u003c/\u003e\n    );\n  },\n});\n```\n\n- We added an `\u003cOutlet/\u003e` instead of our Order component. Now we can swap in new routes there! Notice that the Header will always be there as will the PizzaOfTheDay.\n- We added TanStack's excellent dev tools. We'll take a look at them in a bit, but they're in the bottom left, you can click on them once your app loads.\n- `\u003c\u003e` and `\u003c/\u003e` are for when you want to render two sibling components (our context and our dev tools) but don't want to add a random div there. React requires you only return one top level component and we can do that with `\u003c\u003e` and `\u003c/\u003e`\n\nGreat, let's go modify App.jsx now\n\n```javascript\n// add at top\n// remove useState import from react import\nimport { RouterProvider, createRouter } from \"@tanstack/react-router\";\nimport { routeTree } from \"./routeTree.gen\";\n\nconst router = createRouter({ routeTree });\n\n// replace App\nconst App = () =\u003e {\n  return (\n    \u003cStrictMode\u003e\n      \u003cRouterProvider router={router} /\u003e\n    \u003c/StrictMode\u003e\n  );\n};\n```\n\nThis just imports the generated routeTree and then makes use of it in the project. This file really only should be used for rendering the file. Everything else should likely live in \\_\\_root.jsx.\n\nOkay, move Order.jsx from the base directory and into `routes`. If it asks, say yes to update paths. Rename it to `order.lazy.jsx` Let's modify it now to make it a route.\n\n```javascript\n// at top\nimport { createLazyFileRoute } from \"@tanstack/react-router\";\n\n// make sure you modified the relative paths here ‚Äì VS Code may have done this for you already\nimport { CartContext } from \"../contexts\";\nimport Cart from \"../Cart\";\nimport Pizza from \"../Pizza\";\n\nexport const Route = createLazyFileRoute(\"/order\")({\n  component: Order,\n});\n\nfunction Order() {\n  // Order component code ‚Ä¶\n}\n```\n\n- Here we're making a new route. We define what URL it's at, `/order`, and what component to render, `Order`.\n- We're making it lazy. It will now code split this for us and lazy-load our route for us. This really helps in large apps. In this tiny app it probably actually slows us down because adding 1KB to an app doesn't slow it down, but an extra round trip does. When you do lazy loading, please measure if it's helping. In any case, this is how you do it.\n\nThat's it! This used to be so hard to code split. In some of my old classes we had to go through some serious work to get it work but now this is all it takes! Pretty cool.\n\nLet's add a home page! Make a file called `index.lazy.jsx` in the routes folder.\n\n```javascript\nimport { createLazyFileRoute, Link } from \"@tanstack/react-router\";\n\nexport const Route = createLazyFileRoute(\"/\")({\n  component: Index,\n});\n\nfunction Index() {\n  return (\n    \u003cdiv className=\"index\"\u003e\n      \u003cdiv className=\"index-brand\"\u003e\n        \u003ch1\u003ePadre Gino's\u003c/h1\u003e\n        \u003cp\u003ePizza \u0026 Art at a location near you\u003c/p\u003e\n      \u003c/div\u003e\n      \u003cul\u003e\n        \u003cli\u003e\n          \u003cLink to=\"/order\"\u003eOrder\u003c/Link\u003e\n        \u003c/li\u003e\n        \u003cli\u003e\n          \u003cLink to=\"/past\"\u003ePast Orders\u003c/Link\u003e\n        \u003c/li\u003e\n      \u003c/ul\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\n- Nothing new here except maybe the links. These link components make it easy for TanStack Router to control the browser history so definitely use them.\n\nLastly let's modify Header to be able to link back to the home page.\n\n```javascript\n// at the top\nimport { Link } from \"@tanstack/react-router\";\n\n// surround the logo with a link\n\u003cLink to={\"/\"}\u003e\n  \u003ch1 className=\"logo\"\u003ePadre Gino's Pizza\u003c/h1\u003e\n\u003c/Link\u003e\n```\n\nThis should all work now. Open your app and see if it loads.\n\n- Notice you get a little flash before it loads. It's lazy-loading your route. If this was a real app, we'd make a more pleasant loading experience. I'll leave that as an exercise for you to do.\n- So, let's talk about the cart. Go to the order page, add a bunch of stuff to cart, and head back to the home page. Notice there's still stuff in our cart! Head back to the order page and see it's still there. That's because \\_\\_root.jsx (where our cart state lives) never gets un-rendered. If this just lived in Cart.jsx or order.lazy.jsx, it'd be blown away whenever you navigate away. Why? Because when the component gets un-rendered, it loses all of its state. This is one of the reasons Context can be super powerful.\n- Take a gander at the dev tools being rendered in the bottom left (don't worry, it gets stripped out automatically in production.) Click into and peruse around. Lots of cool stuff here for free.\n\nYou did it! That's how easy routing has become. It's come so far from the early days of React.\n\n\u003e üèÅ [Click here to see the state of the project up until now: 09-routing][step]\n\n[step]: https://github.com/btholt/citr-v9-project/tree/master/09-routing\n[rr]: https://reactrouter.com/\n[v8]: https://react-v8.holt.courses/lessons/react-capabilities/react-router\n[tsr]: https://tanstack.com/router/latest\n","slug":"tanstack-router","title":"TanStack Router","section":"Ecosystem","icon":"seedling","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/05-ecosystem/A-tanstack-router.md","nextSlug":"/lessons/ecosystem/tanstack-query","prevSlug":"/lessons/core-react-concepts/context"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"ecosystem","slug":"tanstack-router"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>