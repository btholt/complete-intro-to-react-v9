<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Deploying the App ‚Äì Complete Intro to React</title><meta name="description" content="Take the client and API server applications into production. The React client app will be hosted on Netlify. The Node.js server API will be hosted on Render."/><meta name="keywords" content="Vite Build,Netlify,Render"/><meta name="og:description" content="Take the client and API server applications into production. The React client app will be hosted on Netlify. The Node.js server API will be hosted on Render."/><meta name="og:title" content="Deploying the App ‚Äì Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Deploying</h2>
<blockquote>
<p>üìù Deploying was discussed, but not demonstrated in the course. You can follow the steps below if you would like to deploy the client and server applications.</p>
</blockquote>
<p>With React or any client-side framework, deployment is easy. Run <code>npm run build</code> to generate your HTML, CSS, and JS file with Vite and toss them on any static web host. This project is a little different because it calls an API from a local Node.js server. So that needs to be deployed too. What good is a pizza ordering website with out pizzas, right?</p>
<p>To get both the client and server applications deployed, we&#39;ll have to do a little refactoring. We&#39;ll also introduces some best practices along the way. The React client app will be deployed to <a href="https://www.netlify.com/">Netlify</a> and the Node.js server app will get deployed to <a href="https://render.com/">Render</a>. Both platforms have free tiers and we&#39;ll use a <a href="https://github.com/">GitHub</a> workflow to make deployment super easy.</p>
<blockquote>
<p>If you want to skip all the refactoring and just deploy the finished applications, you can use the code in the <code>pizza-client-app</code> and <code>pizza-server-app</code> directories in the <a href="https://github.com/btholt/citr-v9-project/tree/main/18-deploying">18-deploying directory</a> in the repo.</p>
</blockquote>
<h3>Refactoring the Static Assets</h3>
<p>Our CSS, fonts, and images are all currently hosted in the API server application. This was purely for convenience so they didn&#39;t need to be copied across each code checkpoint in the course. In the real world, these should be with the React application. </p>
<p>Move the <code>public</code> folder from the API project to the React project:</p>
<p><img src="/images/deploy-public.png" alt="public folder in the VS Code file explorer"></p>
<p>Also, Vite assumes anything in the <code>public</code> directory lives at the root of the published files so open <code>style.css</code> and remove all the &quot;public&quot; references. For example, the font should load from:</p>
<pre><code class="hljs language-css"><span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;/Pacifico-Regular.ttf&quot;</span>);
</code></pre><p>Lastly, update the stylesheet link in the <code>index.html</code> head: </p>
<pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/style.css&quot;</span> /&gt;</span>
</code></pre><h3>Deploy the Node.js API Application</h3>
<p>We still have some work to do in the React app, but let&#39;s get the server application deployed. This is a Node.js application built with Fastify so you need a host that supports Node. We&#39;re going to use <a href="https://render.com/">Render</a> so create an account there if you haven&#39;t already.</p>
<p>We&#39;re going to deploy it to Render with GitHub. Create a new GitHub repo for the API server. I&#39;m using <code>pizza-server-app</code>. Run <code>git init</code> in your local project and add your GitHub repo as a remote repository so we can push the app there when we&#39;re ready.</p>
<p>Now to some refactoring. We moved the <code>/public</code> directory to the client app so we can delete the static file serving:</p>
<pre><code class="hljs language-javascript">server.<span class="hljs-title function_">register</span>(fastifyStatic, {
    ...
});
</code></pre><p>Our image paths need to be updated too. Remove every reference to <code>public</code> in the API responses. For example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// Any image property like this:</span>
<span class="hljs-attr">image</span>: <span class="hljs-string">`/public/pizzas/<span class="hljs-subst">${pizza.pizza_type_id}</span>.webp`</span>,

<span class="hljs-comment">// ...Should have public removed from it:</span>
<span class="hljs-attr">image</span>: <span class="hljs-string">`/pizzas/<span class="hljs-subst">${pizza.pizza_type_id}</span>.webp`</span>,
</code></pre><p>There no reason we need a fake 5 second wait in a production application (it was added to slow down requests so we could see the loading states locally). Remove the Promise:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">5000</span>));
</code></pre><p>Who loves CORS? Since our client application is loading data from a separate server, we need to allow that. The Vite proxy fixed that issue for us locally, but that won&#39;t work in production. We&#39;re taking the easy way out and just allowing everything. Add this Fastify hook to the server and check out the Frontend Masters <a href="https://frontendmasters.com/courses/web-security-v2/">Web Security course</a> to learn more about CORS.</p>
<pre><code class="hljs language-javascript">server.<span class="hljs-title function_">addHook</span>(<span class="hljs-string">&#x27;preHandler&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, done</span>) =&gt;</span> {
    res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>);
    res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="hljs-string">&quot;GET, POST&quot;</span>);
    res.<span class="hljs-title function_">header</span>(<span class="hljs-string">&quot;Access-Control-Allow-Headers&quot;</span>,  <span class="hljs-string">&quot;*&quot;</span>);
    <span class="hljs-keyword">const</span> isPreflight = <span class="hljs-regexp">/options/i</span>.<span class="hljs-title function_">test</span>(req.<span class="hljs-property">method</span>);
    <span class="hljs-keyword">if</span> (isPreflight) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">send</span>();
    }  
    <span class="hljs-title function_">done</span>();
})
</code></pre><p>Lastly, Render requires your application to bind the <code>host</code> property to <code>0.0.0.0</code> instead of <code>localhost</code>, so create a property and update the <code>server.listen()</code> method:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// Create a HOST property after the PORT property</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">HOST</span> = (<span class="hljs-string">&quot;RENDER&quot;</span> <span class="hljs-keyword">in</span> process.<span class="hljs-property">env</span>) ? <span class="hljs-string">`0.0.0.0`</span> : <span class="hljs-string">`localhost`</span>;

<span class="hljs-comment">// pass it to the server.listen() method:</span>
<span class="hljs-keyword">await</span> server.<span class="hljs-title function_">listen</span>({ <span class="hljs-attr">host</span>: <span class="hljs-variable constant_">HOST</span>, <span class="hljs-attr">port</span>: <span class="hljs-variable constant_">PORT</span> });
</code></pre><h3>Deploy to Render</h3>
<p>Ok, we are ready to deploy. Push your code to your GitHub repo.</p>
<p><img src="/images/deploy-repo.png" alt="Node.js server application files in a GitHub repo"></p>
<p>Head over to the <a href="https://dashboard.render.com/">Render Dashboard</a> and <strong>Deploy a New Web Service</strong>. Connect your GitHub account and choose the <code>pizza-server-app</code> repo (or whatever you called yours) as the source code for the project. All the defaults should work, however, make sure you select Free/Hobby tier for the server instance type.</p>
<p>Once your server has deployed, you‚Äôll be able to access it by the URL displayed in your dashboard. You can test it by accessing the <code>[yourserver]/api/pizzas</code> endpoint:</p>
<p><img src="/images/deploy-render.png" alt="Node.js server application files in a GitHub repo"></p>
<p>Your server API is deployed! And the cool thing about this is any time you push to your repo, it will automatically redeploy to Render.</p>
<h3>Deploying the Client Application</h3>
<p>Before we deploy the client application, we need to tweak a few things. We have a local development API server and a remote production API server -- both with two different URLs. We don&#39;t want these hard-coded in our application nor do we want to worry about switching the URL when we build our app. We&#39;re going to use some Vite environment variables to help us. Create two files in the root: <code>.env.development</code> and <code>.env.production</code>. Then add a <code>VITE_API_URL</code> to each:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Add this to .env.development</span>
VITE_API_URL=<span class="hljs-string">&quot;&quot;</span>


<span class="hljs-comment"># Add this to .env.production</span>
VITE_API_URL=<span class="hljs-string">&quot;https://[YOUR-SERVER-URL].onrender.com&quot;</span>
</code></pre><p>You can learn more about this in our <a href="https://frontendmasters.com/courses/vite/">Vite course</a>, but the short version is these variables are added to the <code>import.meta.env</code> property by Vite (depending on it being development or production/build). We are not ignoring these files in Git so you wouldn&#39;t want any sensitive data added to these environment files. If we are running <code>npm run build</code>, add our production URL. If we are running <code>npm run dev</code> don&#39;t add anything -- because our local proxy will handle it.</p>
<p>Speaking of proxy, you can remove the <code>/public</code> proxy from the <code>vite.config.js</code> file. Now let&#39;s use <code>VITE_API_URL</code>. Find our three API helpers (getPastOrders.js, getPastOrder.js, and usePizzaOfTheDay.js) and update the fetch call to use the environment variable. For example:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> apiUrl = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_URL</span>;
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/api/past-order/<span class="hljs-subst">${order}</span>`</span>);
</code></pre><p>You&#39;ll also need to do this in <code>order.lazy.jsx</code>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// create the property at the top</span>
<span class="hljs-keyword">const</span> apiUrl = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_URL</span>;

<span class="hljs-comment">// update checkout</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/api/order`</span>, {
...
})

<span class="hljs-comment">// update fetchPizzaTypes</span>
<span class="hljs-keyword">const</span> pizzasRes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${apiUrl}</span>/api/pizzas`</span>);
</code></pre><h3>Deploy to Netlify</h3>
<p>Whew! I think that&#39;s it. Push your code up to a septate GitHub repo. We&#39;re now ready to deploy!</p>
<p><img src="/images/deploy-client-repo.png" alt="React client app files in a GitHub repo"></p>
<p> Head over to <a href="https://www.netlify.com/">Netilfy</a>, create an account if you don&#39;t already have one, and click to create a new site. You‚Äôll choose to import a project from GitHub:</p>
<p><img src="/images/deploy-netlify.png" alt="Choosing a repo in Netlify"></p>
<p>When configuring the project, the defaults should work:</p>
<p><img src="/images/deploy-netlify-config.png" alt="Netlify configuration settings"></p>
<p>Once your site is deployed, you should be able to access it with the name you selected during the setup. For example, https://[Your-App-Name].netlify.app. </p>
<h3>Congrats!</h3>
<p>You now have a client React application deployed to Netlify and a Node.js server API deployed to Render!</p>
</div><div class="lesson-links"><a href="/lessons/whats-next/react-compiler" class="prev">‚Üê Previous</a><a href="/lessons/wrap-up/congrats" class="next">Next ‚Üí</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Take the client and API server applications into production. The React client app will be hosted on Netlify. The Node.js server API will be hosted on Render.","keywords":["Vite Build","Netlify","Render"]},"html":"\u003ch2\u003eDeploying\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eüìù Deploying was discussed, but not demonstrated in the course. You can follow the steps below if you would like to deploy the client and server applications.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWith React or any client-side framework, deployment is easy. Run \u003ccode\u003enpm run build\u003c/code\u003e to generate your HTML, CSS, and JS file with Vite and toss them on any static web host. This project is a little different because it calls an API from a local Node.js server. So that needs to be deployed too. What good is a pizza ordering website with out pizzas, right?\u003c/p\u003e\n\u003cp\u003eTo get both the client and server applications deployed, we\u0026#39;ll have to do a little refactoring. We\u0026#39;ll also introduces some best practices along the way. The React client app will be deployed to \u003ca href=\"https://www.netlify.com/\"\u003eNetlify\u003c/a\u003e and the Node.js server app will get deployed to \u003ca href=\"https://render.com/\"\u003eRender\u003c/a\u003e. Both platforms have free tiers and we\u0026#39;ll use a \u003ca href=\"https://github.com/\"\u003eGitHub\u003c/a\u003e workflow to make deployment super easy.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you want to skip all the refactoring and just deploy the finished applications, you can use the code in the \u003ccode\u003epizza-client-app\u003c/code\u003e and \u003ccode\u003epizza-server-app\u003c/code\u003e directories in the \u003ca href=\"https://github.com/btholt/citr-v9-project/tree/main/18-deploying\"\u003e18-deploying directory\u003c/a\u003e in the repo.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3\u003eRefactoring the Static Assets\u003c/h3\u003e\n\u003cp\u003eOur CSS, fonts, and images are all currently hosted in the API server application. This was purely for convenience so they didn\u0026#39;t need to be copied across each code checkpoint in the course. In the real world, these should be with the React application. \u003c/p\u003e\n\u003cp\u003eMove the \u003ccode\u003epublic\u003c/code\u003e folder from the API project to the React project:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-public.png\" alt=\"public folder in the VS Code file explorer\"\u003e\u003c/p\u003e\n\u003cp\u003eAlso, Vite assumes anything in the \u003ccode\u003epublic\u003c/code\u003e directory lives at the root of the published files so open \u003ccode\u003estyle.css\u003c/code\u003e and remove all the \u0026quot;public\u0026quot; references. For example, the font should load from:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e\u003cspan class=\"hljs-attribute\"\u003esrc\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eurl\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/Pacifico-Regular.ttf\u0026quot;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLastly, update the stylesheet link in the \u003ccode\u003eindex.html\u003c/code\u003e head: \u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erel\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;stylesheet\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;/style.css\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eDeploy the Node.js API Application\u003c/h3\u003e\n\u003cp\u003eWe still have some work to do in the React app, but let\u0026#39;s get the server application deployed. This is a Node.js application built with Fastify so you need a host that supports Node. We\u0026#39;re going to use \u003ca href=\"https://render.com/\"\u003eRender\u003c/a\u003e so create an account there if you haven\u0026#39;t already.\u003c/p\u003e\n\u003cp\u003eWe\u0026#39;re going to deploy it to Render with GitHub. Create a new GitHub repo for the API server. I\u0026#39;m using \u003ccode\u003epizza-server-app\u003c/code\u003e. Run \u003ccode\u003egit init\u003c/code\u003e in your local project and add your GitHub repo as a remote repository so we can push the app there when we\u0026#39;re ready.\u003c/p\u003e\n\u003cp\u003eNow to some refactoring. We moved the \u003ccode\u003e/public\u003c/code\u003e directory to the client app so we can delete the static file serving:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003eserver.\u003cspan class=\"hljs-title function_\"\u003eregister\u003c/span\u003e(fastifyStatic, {\n    ...\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOur image paths need to be updated too. Remove every reference to \u003ccode\u003epublic\u003c/code\u003e in the API responses. For example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Any image property like this:\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`/public/pizzas/\u003cspan class=\"hljs-subst\"\u003e${pizza.pizza_type_id}\u003c/span\u003e.webp`\u003c/span\u003e,\n\n\u003cspan class=\"hljs-comment\"\u003e// ...Should have public removed from it:\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`/pizzas/\u003cspan class=\"hljs-subst\"\u003e${pizza.pizza_type_id}\u003c/span\u003e.webp`\u003c/span\u003e,\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThere no reason we need a fake 5 second wait in a production application (it was added to slow down requests so we could see the loading states locally). Remove the Promise:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(resolve, \u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWho loves CORS? Since our client application is loading data from a separate server, we need to allow that. The Vite proxy fixed that issue for us locally, but that won\u0026#39;t work in production. We\u0026#39;re taking the easy way out and just allowing everything. Add this Fastify hook to the server and check out the Frontend Masters \u003ca href=\"https://frontendmasters.com/courses/web-security-v2/\"\u003eWeb Security course\u003c/a\u003e to learn more about CORS.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003eserver.\u003cspan class=\"hljs-title function_\"\u003eaddHook\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;preHandler\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq, res, done\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    res.\u003cspan class=\"hljs-title function_\"\u003eheader\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Allow-Origin\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e);\n    res.\u003cspan class=\"hljs-title function_\"\u003eheader\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Allow-Methods\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;GET, POST\u0026quot;\u003c/span\u003e);\n    res.\u003cspan class=\"hljs-title function_\"\u003eheader\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Allow-Headers\u0026quot;\u003c/span\u003e,  \u003cspan class=\"hljs-string\"\u003e\u0026quot;*\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isPreflight = \u003cspan class=\"hljs-regexp\"\u003e/options/i\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(req.\u003cspan class=\"hljs-property\"\u003emethod\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (isPreflight) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e();\n    }  \n    \u003cspan class=\"hljs-title function_\"\u003edone\u003c/span\u003e();\n})\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLastly, Render requires your application to bind the \u003ccode\u003ehost\u003c/code\u003e property to \u003ccode\u003e0.0.0.0\u003c/code\u003e instead of \u003ccode\u003elocalhost\u003c/code\u003e, so create a property and update the \u003ccode\u003eserver.listen()\u003c/code\u003e method:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Create a HOST property after the PORT property\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eHOST\u003c/span\u003e = (\u003cspan class=\"hljs-string\"\u003e\u0026quot;RENDER\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e) ? \u003cspan class=\"hljs-string\"\u003e`0.0.0.0`\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e`localhost`\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// pass it to the server.listen() method:\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e server.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eHOST\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eport\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e });\n\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eDeploy to Render\u003c/h3\u003e\n\u003cp\u003eOk, we are ready to deploy. Push your code to your GitHub repo.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-repo.png\" alt=\"Node.js server application files in a GitHub repo\"\u003e\u003c/p\u003e\n\u003cp\u003eHead over to the \u003ca href=\"https://dashboard.render.com/\"\u003eRender Dashboard\u003c/a\u003e and \u003cstrong\u003eDeploy a New Web Service\u003c/strong\u003e. Connect your GitHub account and choose the \u003ccode\u003epizza-server-app\u003c/code\u003e repo (or whatever you called yours) as the source code for the project. All the defaults should work, however, make sure you select Free/Hobby tier for the server instance type.\u003c/p\u003e\n\u003cp\u003eOnce your server has deployed, you‚Äôll be able to access it by the URL displayed in your dashboard. You can test it by accessing the \u003ccode\u003e[yourserver]/api/pizzas\u003c/code\u003e endpoint:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-render.png\" alt=\"Node.js server application files in a GitHub repo\"\u003e\u003c/p\u003e\n\u003cp\u003eYour server API is deployed! And the cool thing about this is any time you push to your repo, it will automatically redeploy to Render.\u003c/p\u003e\n\u003ch3\u003eDeploying the Client Application\u003c/h3\u003e\n\u003cp\u003eBefore we deploy the client application, we need to tweak a few things. We have a local development API server and a remote production API server -- both with two different URLs. We don\u0026#39;t want these hard-coded in our application nor do we want to worry about switching the URL when we build our app. We\u0026#39;re going to use some Vite environment variables to help us. Create two files in the root: \u003ccode\u003e.env.development\u003c/code\u003e and \u003ccode\u003e.env.production\u003c/code\u003e. Then add a \u003ccode\u003eVITE_API_URL\u003c/code\u003e to each:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Add this to .env.development\u003c/span\u003e\nVITE_API_URL=\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-comment\"\u003e# Add this to .env.production\u003c/span\u003e\nVITE_API_URL=\u003cspan class=\"hljs-string\"\u003e\u0026quot;https://[YOUR-SERVER-URL].onrender.com\u0026quot;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can learn more about this in our \u003ca href=\"https://frontendmasters.com/courses/vite/\"\u003eVite course\u003c/a\u003e, but the short version is these variables are added to the \u003ccode\u003eimport.meta.env\u003c/code\u003e property by Vite (depending on it being development or production/build). We are not ignoring these files in Git so you wouldn\u0026#39;t want any sensitive data added to these environment files. If we are running \u003ccode\u003enpm run build\u003c/code\u003e, add our production URL. If we are running \u003ccode\u003enpm run dev\u003c/code\u003e don\u0026#39;t add anything -- because our local proxy will handle it.\u003c/p\u003e\n\u003cp\u003eSpeaking of proxy, you can remove the \u003ccode\u003e/public\u003c/code\u003e proxy from the \u003ccode\u003evite.config.js\u003c/code\u003e file. Now let\u0026#39;s use \u003ccode\u003eVITE_API_URL\u003c/code\u003e. Find our three API helpers (getPastOrders.js, getPastOrder.js, and usePizzaOfTheDay.js) and update the fetch call to use the environment variable. For example:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e apiUrl = \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emeta\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eVITE_API_URL\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${apiUrl}\u003c/span\u003e/api/past-order/\u003cspan class=\"hljs-subst\"\u003e${order}\u003c/span\u003e`\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou\u0026#39;ll also need to do this in \u003ccode\u003eorder.lazy.jsx\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// create the property at the top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e apiUrl = \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emeta\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eVITE_API_URL\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// update checkout\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${apiUrl}\u003c/span\u003e/api/order`\u003c/span\u003e, {\n...\n})\n\n\u003cspan class=\"hljs-comment\"\u003e// update fetchPizzaTypes\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e pizzasRes = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${apiUrl}\u003c/span\u003e/api/pizzas`\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eDeploy to Netlify\u003c/h3\u003e\n\u003cp\u003eWhew! I think that\u0026#39;s it. Push your code up to a septate GitHub repo. We\u0026#39;re now ready to deploy!\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-client-repo.png\" alt=\"React client app files in a GitHub repo\"\u003e\u003c/p\u003e\n\u003cp\u003e Head over to \u003ca href=\"https://www.netlify.com/\"\u003eNetilfy\u003c/a\u003e, create an account if you don\u0026#39;t already have one, and click to create a new site. You‚Äôll choose to import a project from GitHub:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-netlify.png\" alt=\"Choosing a repo in Netlify\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen configuring the project, the defaults should work:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/deploy-netlify-config.png\" alt=\"Netlify configuration settings\"\u003e\u003c/p\u003e\n\u003cp\u003eOnce your site is deployed, you should be able to access it with the name you selected during the setup. For example, https://[Your-App-Name].netlify.app. \u003c/p\u003e\n\u003ch3\u003eCongrats!\u003c/h3\u003e\n\u003cp\u003eYou now have a client React application deployed to Netlify and a Node.js server API deployed to Render!\u003c/p\u003e\n","markdown":"\n## Deploying\n\n\u003e üìù Deploying was discussed, but not demonstrated in the course. You can follow the steps below if you would like to deploy the client and server applications.\n\nWith React or any client-side framework, deployment is easy. Run `npm run build` to generate your HTML, CSS, and JS file with Vite and toss them on any static web host. This project is a little different because it calls an API from a local Node.js server. So that needs to be deployed too. What good is a pizza ordering website with out pizzas, right?\n\nTo get both the client and server applications deployed, we'll have to do a little refactoring. We'll also introduces some best practices along the way. The React client app will be deployed to [Netlify](https://www.netlify.com/) and the Node.js server app will get deployed to [Render](https://render.com/). Both platforms have free tiers and we'll use a [GitHub](https://github.com/) workflow to make deployment super easy.\n\n\u003e If you want to skip all the refactoring and just deploy the finished applications, you can use the code in the `pizza-client-app` and `pizza-server-app` directories in the [18-deploying directory](https://github.com/btholt/citr-v9-project/tree/main/18-deploying) in the repo.\n\n### Refactoring the Static Assets\n\nOur CSS, fonts, and images are all currently hosted in the API server application. This was purely for convenience so they didn't need to be copied across each code checkpoint in the course. In the real world, these should be with the React application. \n\nMove the `public` folder from the API project to the React project:\n\n![public folder in the VS Code file explorer](/images/deploy-public.png)\n\nAlso, Vite assumes anything in the `public` directory lives at the root of the published files so open `style.css` and remove all the \"public\" references. For example, the font should load from:\n\n```css\nsrc: url(\"/Pacifico-Regular.ttf\");\n```\n\nLastly, update the stylesheet link in the `index.html` head: \n\n```html\n\u003clink rel=\"stylesheet\" href=\"/style.css\" /\u003e\n```\n\n### Deploy the Node.js API Application\n\nWe still have some work to do in the React app, but let's get the server application deployed. This is a Node.js application built with Fastify so you need a host that supports Node. We're going to use [Render](https://render.com/) so create an account there if you haven't already.\n\nWe're going to deploy it to Render with GitHub. Create a new GitHub repo for the API server. I'm using `pizza-server-app`. Run `git init` in your local project and add your GitHub repo as a remote repository so we can push the app there when we're ready.\n\nNow to some refactoring. We moved the `/public` directory to the client app so we can delete the static file serving:\n\n```javascript\nserver.register(fastifyStatic, {\n    ...\n});\n```\n\nOur image paths need to be updated too. Remove every reference to `public` in the API responses. For example:\n\n```javascript\n// Any image property like this:\nimage: `/public/pizzas/${pizza.pizza_type_id}.webp`,\n\n// ...Should have public removed from it:\nimage: `/pizzas/${pizza.pizza_type_id}.webp`,\n```\n\nThere no reason we need a fake 5 second wait in a production application (it was added to slow down requests so we could see the loading states locally). Remove the Promise:\n\n```javascript\nawait new Promise((resolve) =\u003e setTimeout(resolve, 5000));\n```\n\nWho loves CORS? Since our client application is loading data from a separate server, we need to allow that. The Vite proxy fixed that issue for us locally, but that won't work in production. We're taking the easy way out and just allowing everything. Add this Fastify hook to the server and check out the Frontend Masters [Web Security course](https://frontendmasters.com/courses/web-security-v2/) to learn more about CORS.\n\n```javascript\nserver.addHook('preHandler', (req, res, done) =\u003e {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Methods\", \"GET, POST\");\n    res.header(\"Access-Control-Allow-Headers\",  \"*\");\n    const isPreflight = /options/i.test(req.method);\n    if (isPreflight) {\n        return res.send();\n    }  \n    done();\n})\n```\n\nLastly, Render requires your application to bind the `host` property to `0.0.0.0` instead of `localhost`, so create a property and update the `server.listen()` method:\n\n```javascript\n// Create a HOST property after the PORT property\nconst HOST = (\"RENDER\" in process.env) ? `0.0.0.0` : `localhost`;\n\n// pass it to the server.listen() method:\nawait server.listen({ host: HOST, port: PORT });\n```\n\n### Deploy to Render\n\nOk, we are ready to deploy. Push your code to your GitHub repo.\n\n![Node.js server application files in a GitHub repo](/images/deploy-repo.png)\n\nHead over to the [Render Dashboard](https://dashboard.render.com/) and **Deploy a New Web Service**. Connect your GitHub account and choose the `pizza-server-app` repo (or whatever you called yours) as the source code for the project. All the defaults should work, however, make sure you select Free/Hobby tier for the server instance type.\n\nOnce your server has deployed, you‚Äôll be able to access it by the URL displayed in your dashboard. You can test it by accessing the `[yourserver]/api/pizzas` endpoint:\n\n![Node.js server application files in a GitHub repo](/images/deploy-render.png)\n\nYour server API is deployed! And the cool thing about this is any time you push to your repo, it will automatically redeploy to Render.\n\n### Deploying the Client Application\n\nBefore we deploy the client application, we need to tweak a few things. We have a local development API server and a remote production API server -- both with two different URLs. We don't want these hard-coded in our application nor do we want to worry about switching the URL when we build our app. We're going to use some Vite environment variables to help us. Create two files in the root: `.env.development` and `.env.production`. Then add a `VITE_API_URL` to each:\n\n```bash\n# Add this to .env.development\nVITE_API_URL=\"\"\n\n\n# Add this to .env.production\nVITE_API_URL=\"https://[YOUR-SERVER-URL].onrender.com\"\n\n```\n\nYou can learn more about this in our [Vite course](https://frontendmasters.com/courses/vite/), but the short version is these variables are added to the `import.meta.env` property by Vite (depending on it being development or production/build). We are not ignoring these files in Git so you wouldn't want any sensitive data added to these environment files. If we are running `npm run build`, add our production URL. If we are running `npm run dev` don't add anything -- because our local proxy will handle it.\n\nSpeaking of proxy, you can remove the `/public` proxy from the `vite.config.js` file. Now let's use `VITE_API_URL`. Find our three API helpers (getPastOrders.js, getPastOrder.js, and usePizzaOfTheDay.js) and update the fetch call to use the environment variable. For example:\n\n```javascript\nconst apiUrl = import.meta.env.VITE_API_URL;\nconst response = await fetch(`${apiUrl}/api/past-order/${order}`);\n```\n\nYou'll also need to do this in `order.lazy.jsx`:\n\n```javascript\n// create the property at the top\nconst apiUrl = import.meta.env.VITE_API_URL;\n\n// update checkout\nawait fetch(`${apiUrl}/api/order`, {\n...\n})\n\n// update fetchPizzaTypes\nconst pizzasRes = await fetch(`${apiUrl}/api/pizzas`);\n```\n\n### Deploy to Netlify\n\nWhew! I think that's it. Push your code up to a septate GitHub repo. We're now ready to deploy!\n\n![React client app files in a GitHub repo](/images/deploy-client-repo.png)\n\n Head over to [Netilfy](https://www.netlify.com/), create an account if you don't already have one, and click to create a new site. You‚Äôll choose to import a project from GitHub:\n\n![Choosing a repo in Netlify](/images/deploy-netlify.png)\n\nWhen configuring the project, the defaults should work:\n\n![Netlify configuration settings](/images/deploy-netlify-config.png)\n\nOnce your site is deployed, you should be able to access it with the name you selected during the setup. For example, https://[Your-App-Name].netlify.app. \n\n### Congrats!\n\nYou now have a client React application deployed to Netlify and a Node.js server API deployed to Render!\n\n\n\n\n\n\n","slug":"deploying-the-app","title":"Deploying the App","section":"Whats Next","icon":"shuttle-space","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/08-whats-next/E-deploying-the-app.md","nextSlug":"/lessons/wrap-up/congrats","prevSlug":"/lessons/whats-next/react-compiler"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"whats-next","slug":"deploying-the-app"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>