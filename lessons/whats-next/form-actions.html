<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Form Actions – Complete Intro to React</title><meta name="description" content="Learn how to upgrade your application to React 19 and simplify form handling in this segment of Brian Holt’s Complete Intro to React, version 9. Discover new React form actions, &quot;use server&quot; directives for server-side logic, and useFormData hooks to manage input states effectively. Ideal for React developers seeking practical techniques to streamline their web applications."/><meta name="keywords" content="React 19,form actions,useFormData,Brian Holt,React upgrade"/><meta name="og:description" content="Learn how to upgrade your application to React 19 and simplify form handling in this segment of Brian Holt’s Complete Intro to React, version 9. Discover new React form actions, &quot;use server&quot; directives for server-side logic, and useFormData hooks to manage input states effectively. Ideal for React developers seeking practical techniques to streamline their web applications."/><meta name="og:title" content="Form Actions – Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Form Actions</h2>
<p>Okay, so let&#39;s actually upgrade our app to be React 19.</p>
<blockquote>
<p>🚨 Pay attention here, as you need to figure out which version of React to install.</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/react?activeTab=versions">Go here</a> and look at the versions of React published on npm. If you see that React 19 is still in canary/rc/next (which are all the same) then you can run <code>npm i react@rc react-dom@rc</code>. You&#39;ll get a lot of warnings about things not matching versions in your command-line, that&#39;s totally okay.</p>
<p>If React 19 is latest, then run <code>npm install react@19 react-dom@19</code> and then follow these instructions. Be extra cautious because things may have changed!!</p>
<p>Okay, let&#39;s talk form actions. A lot of web interfaces is just handling form inputs, and so the React team decided to make it easier to do that. It&#39;s actually really similar to what we&#39;ve done already, just a little less boilerplate. Open your contact.lazy.jsx and let&#39;s modify this page to use a form action.</p>
<pre><code class="hljs language-javascript"><span class="hljs-attr">mutationFn</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">formData</span>) { <span class="hljs-comment">// change to formData</span>
  <span class="hljs-comment">// remove e.preventDefault</span>
  <span class="hljs-comment">// remove formData constructor</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">postContact</span>(
    formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;name&quot;</span>),
    formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;email&quot;</span>),
    formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;message&quot;</span>),
  );
},

<span class="hljs-comment">// change onSubmit to action</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{mutation.mutate}</span>&gt;</span></span>
</code></pre><p>That&#39;s it! It really is just a convenience function to make handling for submits even easier to do. There&#39;s nothing wrong with what we had either, and that will continue to work as-is too.</p>
<p>Let&#39;s go convert <code>order.lazy.jsx</code> too</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// extract submission function from form</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addToCart</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title function_">setCart</span>([...cart, { <span class="hljs-attr">pizza</span>: selectedPizza, <span class="hljs-attr">size</span>: pizzaSize, price }]);
}
<span class="hljs-comment">// update to action</span>
&lt;form action={addToCart}&gt;[…]&lt;/form&gt;;
</code></pre><p>Same as above. But here&#39;s what cool if you&#39;re using something like Next.js or Remix: we can use the <code>&#39;use server&#39;</code> directive here and make this a <em>server</em> action. Something like</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">formData</span>) {
  <span class="hljs-string">&quot;use server&quot;</span>;
  <span class="hljs-title function_">sql</span>(<span class="hljs-string">`INSERT INTO cart (user_id, pizza_type, size) VALUES ($1, $2)`</span>, [
    formData.<span class="hljs-property">pizza_type</span>,
    formData.<span class="hljs-property">size</span>,
  ]);
}
</code></pre><p>Since it&#39;s on the server, we can now safely insert into our database, directly from inside our React component. React/Next.js will handle all the details of handling the execution of that on server. Pretty cool, right? We&#39;ll talk more about this in Intermediate React v6.</p>
<p>Let&#39;s do one more cool trick here. There&#39;s a new hook called <code>useFormStatus</code> that lets children components see if they&#39;re inside of a form being submitted without having to pass lots of data around.</p>
<p>In <code>contact.lazy.jsx</code></p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> { useFormStatus } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom&quot;</span>; <span class="hljs-comment">// note react-dom, not react</span>

<span class="hljs-comment">// replace the two inputs</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ContactInput</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Name&quot;</span> /&gt;</span></span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ContactInput</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Email&quot;</span> /&gt;</span></span>

<span class="hljs-comment">// at the bottom</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ContactInput</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> { pending } = <span class="hljs-title function_">useFormStatus</span>();
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">disabled</span>=<span class="hljs-string">{pending}</span>
      <span class="hljs-attr">name</span>=<span class="hljs-string">{props.name}</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">{props.type}</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">{props.placeholder}</span>
    /&gt;</span></span>
  );
}
</code></pre><ul>
<li>This is a silly example, but imagine you had really complicated inputs that had a design system, tool tips, and all sorts of other UIs. This is common in large React codebases. This could be really useful for that.</li>
<li>As a side note, if I have really small components like ContactInput, I&#39;ll just stick in the same file like we did here. It can be a useful pattern. Some people are purists and demand one file, one component. I am not a purist.</li>
<li>We didn&#39;t do the button or the text area just for brevity&#39;s sake but you could.</li>
<li>Since we&#39;re local, this pending state will be super short. But you will notice the background flash gray. That&#39;s the disabled state.</li>
</ul>
<p>And that&#39;s form actions!</p>
<blockquote>
<p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/15-form-actions">Click here to see the state of the project up until now: 15-form-actions</a></p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/whats-next/react-19" class="prev">← Previous</a><a href="/lessons/whats-next/use-and-suspense" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Learn how to upgrade your application to React 19 and simplify form handling in this segment of Brian Holt’s Complete Intro to React, version 9. Discover new React form actions, \"use server\" directives for server-side logic, and useFormData hooks to manage input states effectively. Ideal for React developers seeking practical techniques to streamline their web applications.","keywords":["React 19","form actions","useFormData","Brian Holt","React upgrade"]},"html":"\u003ch2\u003eForm Actions\u003c/h2\u003e\n\u003cp\u003eOkay, so let\u0026#39;s actually upgrade our app to be React 19.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🚨 Pay attention here, as you need to figure out which version of React to install.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/react?activeTab=versions\"\u003eGo here\u003c/a\u003e and look at the versions of React published on npm. If you see that React 19 is still in canary/rc/next (which are all the same) then you can run \u003ccode\u003enpm i react@rc react-dom@rc\u003c/code\u003e. You\u0026#39;ll get a lot of warnings about things not matching versions in your command-line, that\u0026#39;s totally okay.\u003c/p\u003e\n\u003cp\u003eIf React 19 is latest, then run \u003ccode\u003enpm install react@19 react-dom@19\u003c/code\u003e and then follow these instructions. Be extra cautious because things may have changed!!\u003c/p\u003e\n\u003cp\u003eOkay, let\u0026#39;s talk form actions. A lot of web interfaces is just handling form inputs, and so the React team decided to make it easier to do that. It\u0026#39;s actually really similar to what we\u0026#39;ve done already, just a little less boilerplate. Open your contact.lazy.jsx and let\u0026#39;s modify this page to use a form action.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-attr\"\u003emutationFn\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003eformData\u003c/span\u003e) { \u003cspan class=\"hljs-comment\"\u003e// change to formData\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// remove e.preventDefault\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// remove formData constructor\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003epostContact\u003c/span\u003e(\n    formData.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e),\n    formData.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e),\n    formData.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e),\n  );\n},\n\n\u003cspan class=\"hljs-comment\"\u003e// change onSubmit to action\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eaction\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{mutation.mutate}\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat\u0026#39;s it! It really is just a convenience function to make handling for submits even easier to do. There\u0026#39;s nothing wrong with what we had either, and that will continue to work as-is too.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s go convert \u003ccode\u003eorder.lazy.jsx\u003c/code\u003e too\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// extract submission function from form\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eaddToCart\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-title function_\"\u003esetCart\u003c/span\u003e([...cart, { \u003cspan class=\"hljs-attr\"\u003epizza\u003c/span\u003e: selectedPizza, \u003cspan class=\"hljs-attr\"\u003esize\u003c/span\u003e: pizzaSize, price }]);\n}\n\u003cspan class=\"hljs-comment\"\u003e// update to action\u003c/span\u003e\n\u0026lt;form action={addToCart}\u0026gt;[…]\u0026lt;/form\u0026gt;;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSame as above. But here\u0026#39;s what cool if you\u0026#39;re using something like Next.js or Remix: we can use the \u003ccode\u003e\u0026#39;use server\u0026#39;\u003c/code\u003e directive here and make this a \u003cem\u003eserver\u003c/em\u003e action. Something like\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eaddToCart\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eformData\u003c/span\u003e) {\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;use server\u0026quot;\u003c/span\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003esql\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`INSERT INTO cart (user_id, pizza_type, size) VALUES ($1, $2)`\u003c/span\u003e, [\n    formData.\u003cspan class=\"hljs-property\"\u003epizza_type\u003c/span\u003e,\n    formData.\u003cspan class=\"hljs-property\"\u003esize\u003c/span\u003e,\n  ]);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSince it\u0026#39;s on the server, we can now safely insert into our database, directly from inside our React component. React/Next.js will handle all the details of handling the execution of that on server. Pretty cool, right? We\u0026#39;ll talk more about this in Intermediate React v6.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s do one more cool trick here. There\u0026#39;s a new hook called \u003ccode\u003euseFormStatus\u003c/code\u003e that lets children components see if they\u0026#39;re inside of a form being submitted without having to pass lots of data around.\u003c/p\u003e\n\u003cp\u003eIn \u003ccode\u003econtact.lazy.jsx\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useFormStatus } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-dom\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// note react-dom, not react\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// replace the two inputs\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eContactInput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;text\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;Name\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eContactInput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;email\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;Email\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// at the bottom\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eContactInput\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprops\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { pending } = \u003cspan class=\"hljs-title function_\"\u003euseFormStatus\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003edisabled\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{pending}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{props.name}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{props.type}\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{props.placeholder}\u003c/span\u003e\n    /\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eThis is a silly example, but imagine you had really complicated inputs that had a design system, tool tips, and all sorts of other UIs. This is common in large React codebases. This could be really useful for that.\u003c/li\u003e\n\u003cli\u003eAs a side note, if I have really small components like ContactInput, I\u0026#39;ll just stick in the same file like we did here. It can be a useful pattern. Some people are purists and demand one file, one component. I am not a purist.\u003c/li\u003e\n\u003cli\u003eWe didn\u0026#39;t do the button or the text area just for brevity\u0026#39;s sake but you could.\u003c/li\u003e\n\u003cli\u003eSince we\u0026#39;re local, this pending state will be super short. But you will notice the background flash gray. That\u0026#39;s the disabled state.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAnd that\u0026#39;s form actions!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🏁 \u003ca href=\"https://github.com/btholt/citr-v9-project/tree/master/15-form-actions\"\u003eClick here to see the state of the project up until now: 15-form-actions\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","markdown":"\n## Form Actions\n\nOkay, so let's actually upgrade our app to be React 19.\n\n\u003e 🚨 Pay attention here, as you need to figure out which version of React to install.\n\n[Go here][npm] and look at the versions of React published on npm. If you see that React 19 is still in canary/rc/next (which are all the same) then you can run `npm i react@rc react-dom@rc`. You'll get a lot of warnings about things not matching versions in your command-line, that's totally okay.\n\nIf React 19 is latest, then run `npm install react@19 react-dom@19` and then follow these instructions. Be extra cautious because things may have changed!!\n\nOkay, let's talk form actions. A lot of web interfaces is just handling form inputs, and so the React team decided to make it easier to do that. It's actually really similar to what we've done already, just a little less boilerplate. Open your contact.lazy.jsx and let's modify this page to use a form action.\n\n```javascript\nmutationFn: function (formData) { // change to formData\n  // remove e.preventDefault\n  // remove formData constructor\n  return postContact(\n    formData.get(\"name\"),\n    formData.get(\"email\"),\n    formData.get(\"message\"),\n  );\n},\n\n// change onSubmit to action\n\u003cform action={mutation.mutate}\u003e\n```\n\nThat's it! It really is just a convenience function to make handling for submits even easier to do. There's nothing wrong with what we had either, and that will continue to work as-is too.\n\nLet's go convert `order.lazy.jsx` too\n\n```javascript\n// extract submission function from form\nfunction addToCart() {\n  setCart([...cart, { pizza: selectedPizza, size: pizzaSize, price }]);\n}\n// update to action\n\u003cform action={addToCart}\u003e[…]\u003c/form\u003e;\n```\n\nSame as above. But here's what cool if you're using something like Next.js or Remix: we can use the `'use server'` directive here and make this a _server_ action. Something like\n\n```javascript\nfunction addToCart(formData) {\n  \"use server\";\n  sql(`INSERT INTO cart (user_id, pizza_type, size) VALUES ($1, $2)`, [\n    formData.pizza_type,\n    formData.size,\n  ]);\n}\n```\n\nSince it's on the server, we can now safely insert into our database, directly from inside our React component. React/Next.js will handle all the details of handling the execution of that on server. Pretty cool, right? We'll talk more about this in Intermediate React v6.\n\nLet's do one more cool trick here. There's a new hook called `useFormStatus` that lets children components see if they're inside of a form being submitted without having to pass lots of data around.\n\nIn `contact.lazy.jsx`\n\n```javascript\n// at top\nimport { useFormStatus } from \"react-dom\"; // note react-dom, not react\n\n// replace the two inputs\n\u003cContactInput name=\"name\" type=\"text\" placeholder=\"Name\" /\u003e\n\u003cContactInput name=\"email\" type=\"email\" placeholder=\"Email\" /\u003e\n\n// at the bottom\nfunction ContactInput(props) {\n  const { pending } = useFormStatus();\n  return (\n    \u003cinput\n      disabled={pending}\n      name={props.name}\n      type={props.type}\n      placeholder={props.placeholder}\n    /\u003e\n  );\n}\n```\n\n- This is a silly example, but imagine you had really complicated inputs that had a design system, tool tips, and all sorts of other UIs. This is common in large React codebases. This could be really useful for that.\n- As a side note, if I have really small components like ContactInput, I'll just stick in the same file like we did here. It can be a useful pattern. Some people are purists and demand one file, one component. I am not a purist.\n- We didn't do the button or the text area just for brevity's sake but you could.\n- Since we're local, this pending state will be super short. But you will notice the background flash gray. That's the disabled state.\n\nAnd that's form actions!\n\n\u003e 🏁 [Click here to see the state of the project up until now: 15-form-actions][step]\n\n[step]: https://github.com/btholt/citr-v9-project/tree/master/15-form-actions\n[npm]: https://www.npmjs.com/package/react?activeTab=versions","slug":"form-actions","title":"Form Actions","section":"Whats Next","icon":"shuttle-space","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/08-whats-next/B-form-actions.md","nextSlug":"/lessons/whats-next/use-and-suspense","prevSlug":"/lessons/whats-next/react-19"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"whats-next","slug":"form-actions"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>