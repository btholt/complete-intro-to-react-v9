<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Error Boundaries – Complete Intro to React</title><meta name="description" content="Learn how to use class components and error boundaries in React development with Brian Holt&#x27;s &quot;Complete Intro to React, v9&quot; course. Understand the transition from function components to class components for error handling and gain insights into managing API errors using techniques like `componentDidCatch`. Ideal for developers navigating legacy React codebases or dealing with API errors, this course offers practical skills to improve your React applications."/><meta name="keywords" content="React error boundaries,class components,API error handling,React development,Brian Holt,legacy React,Complete Intro to React"/><meta name="og:description" content="Learn how to use class components and error boundaries in React development with Brian Holt&#x27;s &quot;Complete Intro to React, v9&quot; course. Understand the transition from function components to class components for error handling and gain insights into managing API errors using techniques like `componentDidCatch`. Ideal for developers navigating legacy React codebases or dealing with API errors, this course offers practical skills to improve your React applications."/><meta name="og:title" content="Error Boundaries – Complete Intro to React"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/2fea0762771cca66.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2fea0762771cca66.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-a6a08e1f60796d6f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8844ca430b4a38f8.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_buildManifest.js" defer=""></script><script src="/_next/static/6cfMzZxR9Y4qzeGRDdjZd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React</a></h1><div class="navbar-info"><a href="https://holt.fyi/react" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><h2>Error Boundaries</h2>
<p>Frequently there are errors with APIs with malformed or otherwise weird data. Let&#39;s be defensive about this because we still want to use this API but we can&#39;t control when we get errors. We&#39;re going to use a feature called <code>componentDidCatch</code> to handle this. This is something you can&#39;t do with hooks so if you needed this sort of functionality you&#39;d have to use a class component.</p>
<p>This will also catch 404s on our API if someone give it an invalid ID!</p>
<p>A component can only catch errors in its children, so that&#39;s important to keep in mind. It cannot catch its own errors. Let&#39;s go make a wrapper to use on PastOrdersRoute. Make a new file called ErrorBoundary.jsx</p>
<p>This is also the first time I&#39;m going to be showing you what was the old way of writing components, called class components. All React code used to be written this way but while it&#39;s not deprecated it is explicitly not recommended by the React team. Previous to this version of the Complete Intro to React I still taught class components as part of the course. In the past year, I kept track and I wrote class components <em>zero</em> times. And as such it is time to retire teaching them as part of an intro course. However, with error boundaries it is the only way to write them, so we will do a brief intro to them so we can learn them. In reality, I would likely just use <a href="https://github.com/bvaughn/react-error-boundary">react-error-boundary</a> and never have to write a class component at all!</p>
<p>A class component is really similar to a function component (which is what we have been writing) but have a few key differences.</p>
<ul>
<li>You cannot use any hooks with class components (useState, useEffect, etc.)</li>
<li>Every class component has a <code>render()</code> function. It works mostly the same as a function component.</li>
<li>Instead of the useState hook you&#39;ll use <code>this.state</code> which is an object that contains all state for that component.</li>
<li>To change state, you&#39;ll use a <code>this.setState({ key: &quot;value&quot; })</code> function. This allows you to change state like your <code>setKey</code> hook would have.</li>
<li>Instead of useEffect, you use lifecycle methods. componentDidMount, componentDidUpdate, componentWillUnmount, etc. To read more about them, <a href="https://react.dev/reference/react/Component">go here</a>.</li>
<li>Instead of a props parameter being passed into the function, you&#39;ll use <code>this.props</code>.</li>
<li>This is enough here. You shouldn&#39;t be authoring class components anymore except for error boundaries. But you may encounter them in legacy React codebases.</li>
</ul>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@tanstack/react-router&quot;</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  state = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> };
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, info</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&quot;ErrorBoundary caught an error&quot;</span>, error, info);
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;error-boundary&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Uh oh!<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
            There was an error with this listing. <span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>Click here<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span>{&quot; &quot;}
            to back to the home page.
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ErrorBoundary</span>;
</code></pre><ul>
<li>Now anything that is a child of this component will have errors caught here. Think of this like a catch block from try/catch.</li>
<li>A static method is one that can be called on the constructor. You&#39;d call this method like this: <code>ErrorBoundary.getDerivedStateFromError(error)</code>. This method must be static.</li>
<li>If you want to call an error logging service, <code>componentDidCatch</code> would be an amazing place to do that. I can recommend <a href="https://sentry.io/">Sentry</a> and <a href="https://trackjs.com/">TrackJS</a>.</li>
<li><code>this.props.children</code> is any child component inside of the component. e.g. if someone renders <code>&lt;MyComponent&gt;&lt;h1&gt;hi&lt;/h1&gt;&lt;/MyComponent&gt;</code>, the <code>&lt;h1&gt;hi&lt;/h1&gt;</code> is consider the the &quot;children&quot;. This works in function components too.</li>
<li>Because we just return children if there&#39;s no error, the ErrorBoundary component doesn&#39;t render anything itself if there are no errors.</li>
</ul>
<p>Let&#39;s go make PastOrderRoute use it in case the API throws an error.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// add import</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../ErrorBoundary&quot;</span>;

<span class="hljs-comment">// replace Route export</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Route</span> = <span class="hljs-title function_">createLazyFileRoute</span>(<span class="hljs-string">&quot;/past&quot;</span>)({
  <span class="hljs-attr">component</span>: <span class="hljs-title class_">ErrorBoundaryWrappedPastOrderRoutes</span>,
});

<span class="hljs-comment">// beneath Route export</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ErrorBoundaryWrappedPastOrderRoutes</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PastOrdersRoute</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  );
}
</code></pre><ul>
<li>Now this is totally self contained. No one rendering PastOrderRoute has to know that it has its own error boundary. I&#39;ll let you decide if you like this pattern or if you would have preferred doing this in App.js at the Router level. Differing opinions exist.</li>
<li>We totally could have made ErrorBoundary a bit more flexible and made it able to accept a component to display in cases of errors. In general I recommend the &quot;WET&quot; code rule (as opposed to <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a>, lol): Write Everything Twice (or I even prefer Write Everything Thrice). In this case, we have one use case for this component, so I won&#39;t spend the extra time to make it flexible. If I used it again, I&#39;d make it work for both of those use cases, but not <em>every</em> use case. On the third or fourth time, I&#39;d then go back and invest the time to make it flexible.</li>
</ul>
<p>Now, if you want to, go add a <code>throw new Error(&quot;lol&quot;);</code> in your render function for the PastOrderRoute to see it work!</p>
<blockquote>
<p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/12-error-boundaries">Click here to see the state of the project up until now: 12-error-boundaries</a></p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/advanced-react/portals" class="prev">← Previous</a><a href="/lessons/advanced-react/uncontrolled-forms" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Learn how to use class components and error boundaries in React development with Brian Holt's \"Complete Intro to React, v9\" course. Understand the transition from function components to class components for error handling and gain insights into managing API errors using techniques like `componentDidCatch`. Ideal for developers navigating legacy React codebases or dealing with API errors, this course offers practical skills to improve your React applications.","keywords":["React error boundaries","class components","API error handling","React development","Brian Holt","legacy React","Complete Intro to React"]},"html":"\u003ch2\u003eError Boundaries\u003c/h2\u003e\n\u003cp\u003eFrequently there are errors with APIs with malformed or otherwise weird data. Let\u0026#39;s be defensive about this because we still want to use this API but we can\u0026#39;t control when we get errors. We\u0026#39;re going to use a feature called \u003ccode\u003ecomponentDidCatch\u003c/code\u003e to handle this. This is something you can\u0026#39;t do with hooks so if you needed this sort of functionality you\u0026#39;d have to use a class component.\u003c/p\u003e\n\u003cp\u003eThis will also catch 404s on our API if someone give it an invalid ID!\u003c/p\u003e\n\u003cp\u003eA component can only catch errors in its children, so that\u0026#39;s important to keep in mind. It cannot catch its own errors. Let\u0026#39;s go make a wrapper to use on PastOrdersRoute. Make a new file called ErrorBoundary.jsx\u003c/p\u003e\n\u003cp\u003eThis is also the first time I\u0026#39;m going to be showing you what was the old way of writing components, called class components. All React code used to be written this way but while it\u0026#39;s not deprecated it is explicitly not recommended by the React team. Previous to this version of the Complete Intro to React I still taught class components as part of the course. In the past year, I kept track and I wrote class components \u003cem\u003ezero\u003c/em\u003e times. And as such it is time to retire teaching them as part of an intro course. However, with error boundaries it is the only way to write them, so we will do a brief intro to them so we can learn them. In reality, I would likely just use \u003ca href=\"https://github.com/bvaughn/react-error-boundary\"\u003ereact-error-boundary\u003c/a\u003e and never have to write a class component at all!\u003c/p\u003e\n\u003cp\u003eA class component is really similar to a function component (which is what we have been writing) but have a few key differences.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eYou cannot use any hooks with class components (useState, useEffect, etc.)\u003c/li\u003e\n\u003cli\u003eEvery class component has a \u003ccode\u003erender()\u003c/code\u003e function. It works mostly the same as a function component.\u003c/li\u003e\n\u003cli\u003eInstead of the useState hook you\u0026#39;ll use \u003ccode\u003ethis.state\u003c/code\u003e which is an object that contains all state for that component.\u003c/li\u003e\n\u003cli\u003eTo change state, you\u0026#39;ll use a \u003ccode\u003ethis.setState({ key: \u0026quot;value\u0026quot; })\u003c/code\u003e function. This allows you to change state like your \u003ccode\u003esetKey\u003c/code\u003e hook would have.\u003c/li\u003e\n\u003cli\u003eInstead of useEffect, you use lifecycle methods. componentDidMount, componentDidUpdate, componentWillUnmount, etc. To read more about them, \u003ca href=\"https://react.dev/reference/react/Component\"\u003ego here\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003eInstead of a props parameter being passed into the function, you\u0026#39;ll use \u003ccode\u003ethis.props\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThis is enough here. You shouldn\u0026#39;t be authoring class components anymore except for error boundaries. But you may encounter them in legacy React codebases.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@tanstack/react-router\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eErrorBoundary\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eComponent\u003c/span\u003e {\n  state = { \u003cspan class=\"hljs-attr\"\u003ehasError\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e };\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetDerivedStateFromError\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e { \u003cspan class=\"hljs-attr\"\u003ehasError\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e };\n  }\n  \u003cspan class=\"hljs-title function_\"\u003ecomponentDidCatch\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eerror, info\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;ErrorBoundary caught an error\u0026quot;\u003c/span\u003e, error, info);\n  }\n  \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehasError\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n        \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;error-boundary\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003eUh oh!\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            There was an error with this listing. \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eClick here\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u0026gt;\u003c/span\u003e{\u0026quot; \u0026quot;}\n            to back to the home page.\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ep\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n      );\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprops\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003echildren\u003c/span\u003e;\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eErrorBoundary\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eNow anything that is a child of this component will have errors caught here. Think of this like a catch block from try/catch.\u003c/li\u003e\n\u003cli\u003eA static method is one that can be called on the constructor. You\u0026#39;d call this method like this: \u003ccode\u003eErrorBoundary.getDerivedStateFromError(error)\u003c/code\u003e. This method must be static.\u003c/li\u003e\n\u003cli\u003eIf you want to call an error logging service, \u003ccode\u003ecomponentDidCatch\u003c/code\u003e would be an amazing place to do that. I can recommend \u003ca href=\"https://sentry.io/\"\u003eSentry\u003c/a\u003e and \u003ca href=\"https://trackjs.com/\"\u003eTrackJS\u003c/a\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ethis.props.children\u003c/code\u003e is any child component inside of the component. e.g. if someone renders \u003ccode\u003e\u0026lt;MyComponent\u0026gt;\u0026lt;h1\u0026gt;hi\u0026lt;/h1\u0026gt;\u0026lt;/MyComponent\u0026gt;\u003c/code\u003e, the \u003ccode\u003e\u0026lt;h1\u0026gt;hi\u0026lt;/h1\u0026gt;\u003c/code\u003e is consider the the \u0026quot;children\u0026quot;. This works in function components too.\u003c/li\u003e\n\u003cli\u003eBecause we just return children if there\u0026#39;s no error, the ErrorBoundary component doesn\u0026#39;t render anything itself if there are no errors.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLet\u0026#39;s go make PastOrderRoute use it in case the API throws an error.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// add import\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eErrorBoundary\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;../ErrorBoundary\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// replace Route export\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateLazyFileRoute\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/past\u0026quot;\u003c/span\u003e)({\n  \u003cspan class=\"hljs-attr\"\u003ecomponent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eErrorBoundaryWrappedPastOrderRoutes\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// beneath Route export\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eErrorBoundaryWrappedPastOrderRoutes\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eErrorBoundary\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ePastOrdersRoute\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eErrorBoundary\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eNow this is totally self contained. No one rendering PastOrderRoute has to know that it has its own error boundary. I\u0026#39;ll let you decide if you like this pattern or if you would have preferred doing this in App.js at the Router level. Differing opinions exist.\u003c/li\u003e\n\u003cli\u003eWe totally could have made ErrorBoundary a bit more flexible and made it able to accept a component to display in cases of errors. In general I recommend the \u0026quot;WET\u0026quot; code rule (as opposed to \u003ca href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\"\u003eDRY\u003c/a\u003e, lol): Write Everything Twice (or I even prefer Write Everything Thrice). In this case, we have one use case for this component, so I won\u0026#39;t spend the extra time to make it flexible. If I used it again, I\u0026#39;d make it work for both of those use cases, but not \u003cem\u003eevery\u003c/em\u003e use case. On the third or fourth time, I\u0026#39;d then go back and invest the time to make it flexible.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNow, if you want to, go add a \u003ccode\u003ethrow new Error(\u0026quot;lol\u0026quot;);\u003c/code\u003e in your render function for the PastOrderRoute to see it work!\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🏁 \u003ca href=\"https://github.com/btholt/citr-v9-project/tree/master/12-error-boundaries\"\u003eClick here to see the state of the project up until now: 12-error-boundaries\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","markdown":"\n## Error Boundaries\n\nFrequently there are errors with APIs with malformed or otherwise weird data. Let's be defensive about this because we still want to use this API but we can't control when we get errors. We're going to use a feature called `componentDidCatch` to handle this. This is something you can't do with hooks so if you needed this sort of functionality you'd have to use a class component.\n\nThis will also catch 404s on our API if someone give it an invalid ID!\n\nA component can only catch errors in its children, so that's important to keep in mind. It cannot catch its own errors. Let's go make a wrapper to use on PastOrdersRoute. Make a new file called ErrorBoundary.jsx\n\nThis is also the first time I'm going to be showing you what was the old way of writing components, called class components. All React code used to be written this way but while it's not deprecated it is explicitly not recommended by the React team. Previous to this version of the Complete Intro to React I still taught class components as part of the course. In the past year, I kept track and I wrote class components _zero_ times. And as such it is time to retire teaching them as part of an intro course. However, with error boundaries it is the only way to write them, so we will do a brief intro to them so we can learn them. In reality, I would likely just use [react-error-boundary][reb] and never have to write a class component at all!\n\nA class component is really similar to a function component (which is what we have been writing) but have a few key differences.\n\n- You cannot use any hooks with class components (useState, useEffect, etc.)\n- Every class component has a `render()` function. It works mostly the same as a function component.\n- Instead of the useState hook you'll use `this.state` which is an object that contains all state for that component.\n- To change state, you'll use a `this.setState({ key: \"value\" })` function. This allows you to change state like your `setKey` hook would have.\n- Instead of useEffect, you use lifecycle methods. componentDidMount, componentDidUpdate, componentWillUnmount, etc. To read more about them, [go here][lifecycle].\n- Instead of a props parameter being passed into the function, you'll use `this.props`.\n- This is enough here. You shouldn't be authoring class components anymore except for error boundaries. But you may encounter them in legacy React codebases.\n\n```javascript\nimport { Component } from \"react\";\nimport { Link } from \"@tanstack/react-router\";\n\nclass ErrorBoundary extends Component {\n  state = { hasError: false };\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n  componentDidCatch(error, info) {\n    console.error(\"ErrorBoundary caught an error\", error, info);\n  }\n  render() {\n    if (this.state.hasError) {\n      return (\n        \u003cdiv className=\"error-boundary\"\u003e\n          \u003ch2\u003eUh oh!\u003c/h2\u003e\n          \u003cp\u003e\n            There was an error with this listing. \u003cLink to=\"/\"\u003eClick here\u003c/Link\u003e{\" \"}\n            to back to the home page.\n          \u003c/p\u003e\n        \u003c/div\u003e\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n```\n\n- Now anything that is a child of this component will have errors caught here. Think of this like a catch block from try/catch.\n- A static method is one that can be called on the constructor. You'd call this method like this: `ErrorBoundary.getDerivedStateFromError(error)`. This method must be static.\n- If you want to call an error logging service, `componentDidCatch` would be an amazing place to do that. I can recommend [Sentry][sentry] and [TrackJS][trackjs].\n- `this.props.children` is any child component inside of the component. e.g. if someone renders `\u003cMyComponent\u003e\u003ch1\u003ehi\u003c/h1\u003e\u003c/MyComponent\u003e`, the `\u003ch1\u003ehi\u003c/h1\u003e` is consider the the \"children\". This works in function components too.\n- Because we just return children if there's no error, the ErrorBoundary component doesn't render anything itself if there are no errors.\n\nLet's go make PastOrderRoute use it in case the API throws an error.\n\n```javascript\n// add import\nimport ErrorBoundary from \"../ErrorBoundary\";\n\n// replace Route export\nexport const Route = createLazyFileRoute(\"/past\")({\n  component: ErrorBoundaryWrappedPastOrderRoutes,\n});\n\n// beneath Route export\nfunction ErrorBoundaryWrappedPastOrderRoutes() {\n  return (\n    \u003cErrorBoundary\u003e\n      \u003cPastOrdersRoute /\u003e\n    \u003c/ErrorBoundary\u003e\n  );\n}\n```\n\n- Now this is totally self contained. No one rendering PastOrderRoute has to know that it has its own error boundary. I'll let you decide if you like this pattern or if you would have preferred doing this in App.js at the Router level. Differing opinions exist.\n- We totally could have made ErrorBoundary a bit more flexible and made it able to accept a component to display in cases of errors. In general I recommend the \"WET\" code rule (as opposed to [DRY][dry], lol): Write Everything Twice (or I even prefer Write Everything Thrice). In this case, we have one use case for this component, so I won't spend the extra time to make it flexible. If I used it again, I'd make it work for both of those use cases, but not _every_ use case. On the third or fourth time, I'd then go back and invest the time to make it flexible.\n\nNow, if you want to, go add a `throw new Error(\"lol\");` in your render function for the PastOrderRoute to see it work!\n\n\u003e 🏁 [Click here to see the state of the project up until now: 12-error-boundaries][step]\n\n[step]: https://github.com/btholt/citr-v9-project/tree/master/12-error-boundaries\n[sentry]: https://sentry.io/\n[trackjs]: https://trackjs.com/\n[dry]: https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\n[reb]: https://github.com/bvaughn/react-error-boundary\n[lifecycle]: https://react.dev/reference/react/Component\n","slug":"error-boundaries","title":"Error Boundaries","section":"Advanced React","icon":"dumbbell","filePath":"/home/runner/work/complete-intro-to-react-v9/complete-intro-to-react-v9/lessons/06-advanced-react/B-error-boundaries.md","nextSlug":"/lessons/advanced-react/uncontrolled-forms","prevSlug":"/lessons/advanced-react/portals"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"advanced-react","slug":"error-boundaries"},"buildId":"6cfMzZxR9Y4qzeGRDdjZd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>